a:4:{s:5:"child";a:1:{s:0:"";a:1:{s:3:"rss";a:1:{i:0;a:6:{s:4:"data";s:3:"


";s:7:"attribs";a:1:{s:0:"";a:1:{s:7:"version";s:3:"2.0";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:1:{s:0:"";a:1:{s:7:"channel";a:1:{i:0;a:6:{s:4:"data";s:65:"
	
	
	
	
	
	
	
	
	
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:7:"Encosia";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:18:"http://encosia.com";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:43:"ASP.NET and AJAX code, ideas, and examples.";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:13:"lastBuildDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Mon, 02 May 2011 17:57:29 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"language";a:1:{i:0;a:5:{s:4:"data";s:2:"en";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:9:"generator";a:1:{i:0;a:5:{s:4:"data";s:29:"http://wordpress.org/?v=3.1.1";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"item";a:15:{i:0;a:6:{s:4:"data";s:41:"
		
		
		
		
		
				

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:57:"Hear Joe Stagner and I talk community, business, and more";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:51:"http://feeds.encosia.com/~r/Encosia/~3/fHg9tIRQqhE/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:95:"http://encosia.com/2011/05/02/hear-joe-stagner-and-i-talk-community-business-and-more/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Mon, 02 May 2011 17:57:29 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:1:{i:0;a:5:{s:4:"data";s:7:"General";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:26:"http://encosia.com/?p=1111";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:1088:"Years ago, Joe Stagner was one of the first people at Microsoft that I happened to get in touch with about ASP.NET and the topics I was blogging about here. In fact, he was responsible for the first real bump in traffic my blog received back in 2007. So, when Joe asked me to come [...]


Related posts:<ol><li><a href='http://encosia.com/2010/08/30/hear-me-talk-jquery-and-asp-net-on-the-jquery-podcast/' rel='bookmark' title='Permanent Link: Hear me talk jQuery and ASP.NET on the jQuery Podcast'>Hear me talk jQuery and ASP.NET on the jQuery Podcast</a></li>
<li><a href='http://encosia.com/2009/06/20/hear-me-talk-about-jquery-on-the-polymorphic-podcast/' rel='bookmark' title='Permanent Link: Hear me talk about jQuery on the Polymorphic Podcast'>Hear me talk about jQuery on the Polymorphic Podcast</a></li>
<li><a href='http://encosia.com/2011/03/16/hear-us-talk-about-javascript-on-hanselminutes-episode-28/' rel='bookmark' title='Permanent Link: Hear us talk about JavaScript on Hanselminutes episode 2^8'>Hear us talk about JavaScript on Hanselminutes episode 2^8</a></li>
</ol>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:9:"Dave Ward";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:3674:"<p>Years ago, <a href="http://msjoe.com/" target="_blank">Joe Stagner</a> was one of the first people at Microsoft that I happened to get in touch with about ASP.NET and the topics I was blogging about here.  In fact, he was responsible for the first real bump in traffic my blog received back in 2007.  So, when Joe asked me to come on his podcast earlier this year, I was eager.</p>
<p>We talked about a wide variety of topics, including <strong>dealing with plagiarism</strong>, <strong>how to become a Microsoft MVP</strong>, and <strong>selling new web technology to non-technical decision makers</strong>.  Fair warning: it was unscripted and less jQuery, ASP.NET, or JavaScript themed than other podcasts you may have heard me on in the past, but I think it turned out pretty well if you&#8217;re interested in broader topics surrounding the technology.</p>
<p>You can download or listen to it here on Joe&#8217;s site: <a href="http://www.msjoe.com/2011/04/podcast-dave-ward/" target="_blank">Podcast &#8211; Dave Ward Encosia</a></p>


<p>Related posts:<ol><li><a href='http://encosia.com/2010/08/30/hear-me-talk-jquery-and-asp-net-on-the-jquery-podcast/' rel='bookmark' title='Permanent Link: Hear me talk jQuery and ASP.NET on the jQuery Podcast'>Hear me talk jQuery and ASP.NET on the jQuery Podcast</a></li>
<li><a href='http://encosia.com/2009/06/20/hear-me-talk-about-jquery-on-the-polymorphic-podcast/' rel='bookmark' title='Permanent Link: Hear me talk about jQuery on the Polymorphic Podcast'>Hear me talk about jQuery on the Polymorphic Podcast</a></li>
<li><a href='http://encosia.com/2011/03/16/hear-us-talk-about-javascript-on-hanselminutes-episode-28/' rel='bookmark' title='Permanent Link: Hear us talk about JavaScript on Hanselminutes episode 2^8'>Hear us talk about JavaScript on Hanselminutes episode 2^8</a></li>
</ol></p><hr />

<p>You've been reading <a href="http://encosia.com/2011/05/02/hear-joe-stagner-and-i-talk-community-business-and-more/">Hear Joe Stagner and I talk community, business, and more</a>, originally posted at <a href="http://encosia.com">Encosia</a>.  I hope you enjoyed it, and thanks for reading.</p>

<p>If you've got any feedback, please click through and leave a comment; I'd love to hear from you. You can <a href="http://encosia.com/2011/05/02/hear-joe-stagner-and-i-talk-community-business-and-more/#post-commentblock">click here to jump directly to the comment section of this post</a>.</p><div class="feedflare">
<a href="http://feeds.encosia.com/~ff/Encosia?a=fHg9tIRQqhE:nszQsdiNJME:D7DqB2pKExk"><img src="http://feeds.feedburner.com/~ff/Encosia?i=fHg9tIRQqhE:nszQsdiNJME:D7DqB2pKExk" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=fHg9tIRQqhE:nszQsdiNJME:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=fHg9tIRQqhE:nszQsdiNJME:aWKiLpGymzw"><img src="http://feeds.feedburner.com/~ff/Encosia?d=aWKiLpGymzw" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=fHg9tIRQqhE:nszQsdiNJME:30RXbuXOgYA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=30RXbuXOgYA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=fHg9tIRQqhE:nszQsdiNJME:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Encosia?i=fHg9tIRQqhE:nszQsdiNJME:F7zBnMyn0Lo" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=fHg9tIRQqhE:nszQsdiNJME:gIN9vFwOqvQ"><img src="http://feeds.feedburner.com/~ff/Encosia?i=fHg9tIRQqhE:nszQsdiNJME:gIN9vFwOqvQ" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Encosia/~4/fHg9tIRQqhE" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:91:"http://encosia.com/2011/05/02/hear-joe-stagner-and-i-talk-community-business-and-more/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:1:"0";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:86:"http://encosia.com/2011/05/02/hear-joe-stagner-and-i-talk-community-business-and-more/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:1;a:6:{s:4:"data";s:44:"
		
		
		
		
		
				
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:55:"ASP.NET web services mistake: manual JSON serialization";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:51:"http://feeds.encosia.com/~r/Encosia/~3/crq75ffH6JI/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:94:"http://encosia.com/2011/04/13/asp-net-web-services-mistake-manual-json-serialization/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Wed, 13 Apr 2011 17:16:41 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:2:{i:0;a:5:{s:4:"data";s:32:"ASMX Mistakes and Misconceptions";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:7:"ASP.NET";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:26:"http://encosia.com/?p=1106";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:1181:"If you’ve spent much time working with the .NET platform, ASP.NET&#8217;s simple, convention-based approach to exposing JSON endpoints seems just about too good to be true. After years of fiddling with manual settings in XML configuration files, it&#8217;s understandable to assume that working with JSON in ASP.NET would require a similar rigmarole, yet it does [...]


Related posts:<ol><li><a href='http://encosia.com/2010/05/31/asmx-scriptservice-mistake-invalid-json-primitive/' rel='bookmark' title='Permanent Link: ASMX ScriptService mistake &#8211; Invalid JSON primitive'>ASMX ScriptService mistake &#8211; Invalid JSON primitive</a></li>
<li><a href='http://encosia.com/2009/04/07/using-complex-types-to-make-calling-services-less-complex/' rel='bookmark' title='Permanent Link: Using complex types to make calling services less&#8230; complex'>Using complex types to make calling services less&#8230; complex</a></li>
<li><a href='http://encosia.com/2009/02/10/a-breaking-change-between-versions-of-aspnet-ajax/' rel='bookmark' title='Permanent Link: A breaking change between versions of ASP.NET AJAX'>A breaking change between versions of ASP.NET AJAX</a></li>
</ol>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:9:"Dave Ward";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:24548:"<p>If you’ve spent much time working with the .NET platform, ASP.NET&#8217;s simple, convention-based approach to exposing JSON endpoints seems just about too good to be true. After years of fiddling with manual settings in XML configuration files, it&#8217;s understandable to assume that working with JSON in ASP.NET would require a similar rigmarole, yet it does not.</p>
<p>Unfortunately, this unexpected ease-of-use isn’t obvious if you don’t already know about it, which has led some developers to build needlessly complicated solutions to problems that don&#8217;t actually exist. In this post, I want to point out a few ways <strong>not</strong> to approach JSON in ASP.NET and then show you a couple examples of leveraging the frame work to do it &#8220;right&#8221;.</p>
<h3>A couple examples of what NOT to do</h3>
<p>To show you exactly what I&#8217;m talking about, let&#8217;s start by looking at a few concrete examples of ways that you should <strong>not</strong> handle sending and receiving JSON in your ASP.NET services.</p>
<p>For all the examples, we&#8217;re going to be trying to send and/or receive instances of this Person class:</p>

<div class="wp_syntax"><div class="code"><pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF;">public</span> <span style="color: #FF0000;">class</span> Person
<span style="color: #000000;">&#123;</span>
  <span style="color: #0600FF;">public</span> <span style="color: #FF0000;">string</span> FirstName <span style="color: #000000;">&#123;</span> get<span style="color: #008000;">;</span> set<span style="color: #008000;">;</span> <span style="color: #000000;">&#125;</span>
  <span style="color: #0600FF;">public</span> <span style="color: #FF0000;">string</span> LastName <span style="color: #000000;">&#123;</span> get<span style="color: #008000;">;</span> set<span style="color: #008000;">;</span> <span style="color: #000000;">&#125;</span>
<span style="color: #000000;">&#125;</span></pre></div></div>

<p>Once you progress beyond simple scalar types, sending objects (and collections of them) back and forth is a pretty logical next step, and that&#8217;s also the point where this manual serialization trouble seems to begin. So, working with this simple Person class should serve as a realistic example, without being overly complex.</p>
<h4>Manual serialization, using JavaScriptSerializer</h4>
<p>The most common variant of this mistake that I&#8217;ve seen is using JavaScriptSerializer to manually build a JSON string and then returning that string as the result of a service method. For example, if you didn&#8217;t know better, you might do this to return an instance of the Person class:</p>

<div class="wp_syntax"><div class="code"><pre class="csharp" style="font-family:monospace;"><span style="color: #000000;">&#91;</span>ScriptService<span style="color: #000000;">&#93;</span>
<span style="color: #0600FF;">public</span> <span style="color: #FF0000;">class</span> PersonService <span style="color: #008000;">:</span> WebService
<span style="color: #000000;">&#123;</span>
  <span style="color: #000000;">&#91;</span>WebMethod<span style="color: #000000;">&#93;</span>
  <span style="color: #0600FF;">public</span> <span style="color: #FF0000;">string</span> GetDave<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>
  <span style="color: #000000;">&#123;</span>
    Person dave <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> Person<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
    dave.<span style="color: #0000FF;">FirstName</span> <span style="color: #008000;">=</span> Dave<span style="color: #008000;">;</span>
    dave.<span style="color: #0000FF;">LastName</span> <span style="color: #008000;">=</span> Ward<span style="color: #008000;">;</span>
&nbsp;
    JavaScriptSerializer jss <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> JavaScriptSerializer<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
    <span style="color: #008080; font-style: italic;">// Results in {&quot;FirstName&quot;:&quot;Dave&quot;,&quot;LastName&quot;:&quot;Ward&quot;}</span>
    <span style="color: #FF0000;">string</span> json <span style="color: #008000;">=</span> jss.<span style="color: #0000FF;">Serialize</span><span style="color: #008000;">&lt;</span>Person<span style="color: #008000;">&gt;</span><span style="color: #000000;">&#40;</span>dave<span style="color: #000000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
    <span style="color: #0600FF;">return</span> json<span style="color: #008000;">;</span>
  <span style="color: #000000;">&#125;</span>
<span style="color: #000000;">&#125;</span></pre></div></div>

<p>This may look sensible enough on the surface. After all, the <code>json</code> variable does end up containing a nicely serialized JSON string, which seems to be what we want.  However, <strong>you should not do this</strong>.</p>
<h4>What actually happens</h4>
<p>Part of the beauty of using ASP.NET&#8217;s JSON-enabled services is that you rarely have to think much about the translation between JSON on the client-side and .NET objects on the server-side.  When requested with the proper incantations, <strong>ASP.NET automatically JSON serializes your service methods&#8217; responses, even if their result is an object or collection of objects</strong>.</p>
<p>Unfortunately, that automatic translation also makes it easy to end up with doubly-serialized responses if you aren&#8217;t aware that ASP.NET is already handling the serialization for you, which is exactly what would happen in the preceding example. The end result is that the Person object is serialized twice before it gets back to the browser &#8211; once as part of the method&#8217;s imperative code and then a second time by convention.</p>
<p>In other words, it&#8217;s understandable to expect the previous code example would return this response:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #009900;">&#123;</span><span style="color: #3366CC;">&quot;FirstName&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;Dave&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;LastName&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;Ward&quot;</span><span style="color: #009900;">&#125;</span></pre></div></div>

<p>But, what it actually returns is this:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #006600; font-style: italic;">// All the quotes in the manually generated JSON must be escaped in </span>
<span style="color: #006600; font-style: italic;">//  the second pass, hence all the backslashes.</span>
<span style="color: #009900;">&#123;</span><span style="color: #3366CC;">&quot;d&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;{<span style="color: #000099; font-weight: bold;">\&quot;</span>FirstName<span style="color: #000099; font-weight: bold;">\&quot;</span>:<span style="color: #000099; font-weight: bold;">\&quot;</span>Dave<span style="color: #000099; font-weight: bold;">\&quot;</span>,<span style="color: #000099; font-weight: bold;">\&quot;</span>LastName<span style="color: #000099; font-weight: bold;">\&quot;</span>:<span style="color: #000099; font-weight: bold;">\&quot;</span>Ward<span style="color: #000099; font-weight: bold;">\&quot;</span>}&quot;</span><span style="color: #009900;">&#125;</span></pre></div></div>

<p>What a mess. That’s probably not what you had in mind, is it?</p>
<h4>Using DataContractJsonSerializer or Json.NET is no better</h4>
<p>This may seem obvious, but I want to point out that using a different manual serialization tool, like WCF&#8217;s DataContractJsonSerializer or Json.NET, in place of JavaScriptSerializer above does not remedy the underlying problem. I only mention it because I&#8217;ve seen those variations of the mistake floating around too.</p>
<p>If anything, in the case of DataContractJsonSerializer, it&#8217;s even worse. DCJS&#8217; handling of Dictionary collections and Enums makes life unnecessarily tedious at times, and the code to manually invoke it is even more verbose than that for JavaScriptSerializer.</p>
<h3>The impact this mistake has on the client-side</h3>
<p>If it weren&#8217;t bad enough to add extra computational overhead on the server-side, cruft up the response with escaping backslashes, and increase the size of the JSON payload over the wire, this mistake carries a penalty on the client-side too.</p>
<p>Most JavaScript frameworks automatically deserialize JSON responses, but (rightfully) only expect one level of JSON serialization. That means that the standard functionality provided by most libraries will only unwrap one level of the doubly serialized stack of JSON produced by the previous example.</p>
<p>So, even after the response comes back and your framework has deserialized it once, you&#8217;ll still need to deserialize it a second time to finally extract a usable JavaScript object if you&#8217;ve made the mistake of manually serializing. For example, this is code you might see to mitigate that in jQuery:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;">$.<span style="color: #660066;">ajax</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span>
  type<span style="color: #339933;">:</span> <span style="color: #3366CC;">'POST'</span><span style="color: #339933;">,</span>
  dataType<span style="color: #339933;">:</span> <span style="color: #3366CC;">'json'</span><span style="color: #339933;">,</span>
  contentType<span style="color: #339933;">:</span> <span style="color: #3366CC;">'application/json'</span><span style="color: #339933;">,</span>
  url<span style="color: #339933;">:</span> <span style="color: #3366CC;">'PersonService.asmx/GetDave'</span><span style="color: #339933;">,</span>
  data<span style="color: #339933;">:</span> <span style="color: #3366CC;">'{}'</span><span style="color: #339933;">,</span>
  success<span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>response<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #006600; font-style: italic;">// At this point, response is a *string* containing the</span>
    <span style="color: #006600; font-style: italic;">//  manually generated JSON, and must be deserialized again.</span>
&nbsp;
    <span style="color: #003366; font-weight: bold;">var</span> person<span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #006600; font-style: italic;">// This is a very common way of handling</span>
    <span style="color: #006600; font-style: italic;">//  the second round of JSON deserialization:</span>
    person <span style="color: #339933;">=</span> <span style="color: #000066; font-weight: bold;">eval</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'('</span> <span style="color: #339933;">+</span> response <span style="color: #339933;">+</span> <span style="color: #3366CC;">')'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #006600; font-style: italic;">// You'll also see this approach, which</span>
    <span style="color: #006600; font-style: italic;">//  uses browser-native JSON handling:</span>
    person <span style="color: #339933;">=</span> JSON.<span style="color: #660066;">parse</span><span style="color: #009900;">&#40;</span>response<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #006600; font-style: italic;">// Using a framework's built-in helper </span>
    <span style="color: #006600; font-style: italic;">//  method is another common fix:</span>
    person <span style="color: #339933;">=</span> $.<span style="color: #660066;">parseJSON</span><span style="color: #009900;">&#40;</span>person<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
  <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>Regardless of which approach is used, if you see code like this running after the framework has already processed a response, it&#8217;s a pretty good indication that something is wrong. Not only is this more complicated and verbose than it needs to be, but it adds additional overhead on the client-side for absolutely no valid reason.</p>
<h3>Flipping the script (and the JSON)</h3>
<p>Redundant JSON serialization on responses is definitely one of the most common variations of this problem I&#8217;ve seen, but the inverse of that mistake also seems to be an alluring pitfall. Far too often, I’ve seen service methods that accept a single JSON string as their input parameter and then manually parse several intended inputs from that.</p>
<p>Something like this to accept a Person object form the client-side and save it on the server-side, for example:</p>

<div class="wp_syntax"><div class="code"><pre class="csharp" style="font-family:monospace;"><span style="color: #000000;">&#91;</span>ScriptService<span style="color: #000000;">&#93;</span>
<span style="color: #0600FF;">public</span> <span style="color: #FF0000;">class</span> PersonService <span style="color: #008000;">:</span> WebService
<span style="color: #000000;">&#123;</span>
  <span style="color: #000000;">&#91;</span>WebMethod<span style="color: #000000;">&#93;</span>
  <span style="color: #0600FF;">public</span> <span style="color: #0600FF;">void</span> SavePerson<span style="color: #000000;">&#40;</span><span style="color: #FF0000;">string</span> PersonToSave<span style="color: #000000;">&#41;</span>
  <span style="color: #000000;">&#123;</span>
    JavaScriptSerializer jss <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> JavaScriptSerializer<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
    Person p <span style="color: #008000;">=</span> jss.<span style="color: #0000FF;">Deserialize</span><span style="color: #008000;">&lt;</span>Person<span style="color: #008000;">&gt;</span><span style="color: #000000;">&#40;</span>PersonToSave<span style="color: #000000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
    p.<span style="color: #0000FF;">Save</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #008000;">;</span>
  <span style="color: #000000;">&#125;</span>
<span style="color: #000000;">&#125;</span></pre></div></div>

<p>Just as ASP.NET automatically JSON serializes responses on its JSON-friendly services, it also expects that the input parameters will be in JSON format and automatically deserializes those on the way in. So, in reverse order, the approach above makes a mistake similar to the ones shown earlier.</p>
<p>To make this work, we&#8217;d need to pass in JSON that looks something like this, obfuscating the actually desired input parameters inside a single, doubly-serialized string parameter.</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #009900;">&#123;</span><span style="color: #3366CC;">&quot;PersonToSave&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;{<span style="color: #000099; font-weight: bold;">\&quot;</span>FirstName<span style="color: #000099; font-weight: bold;">\&quot;</span>:<span style="color: #000099; font-weight: bold;">\&quot;</span>Dave<span style="color: #000099; font-weight: bold;">\&quot;</span>,<span style="color: #000099; font-weight: bold;">\&quot;</span>LastName<span style="color: #000099; font-weight: bold;">\&quot;</span>:<span style="color: #000099; font-weight: bold;">\&quot;</span>Ward<span style="color: #000099; font-weight: bold;">\&quot;</span>}&quot;</span><span style="color: #009900;">&#125;</span></pre></div></div>

<p>Through the convenience of JSON.stringify(), it&#8217;s not even terribly hard to stumble onto a process for cobbling that double-JSON structure together on the client-side and making this approach work.  I strongly recommend against it though.  Even if the double-JSON didn&#8217;t carry extra overhead in several aspects, having a single input parameter of type string on this method is misleading.  A year from now, will anyone realize what type of parameter that method accepts without looking down into the manual parsing code?  Probably not.</p>
<h3>Doing it right</h3>
<p>Briefly, here are what I suggest as better ways to handle passing our Person object in and out of ASP.NET services.</p>
<h4>Returning an object</h4>
<p>Returning a .NET object from ASP.NET services is incredibly easy. If you let go and just trust the service to handle JSON translation for you, &#8220;it just works&#8221;:</p>

<div class="wp_syntax"><div class="code"><pre class="csharp" style="font-family:monospace;"><span style="color: #000000;">&#91;</span>ScriptService<span style="color: #000000;">&#93;</span>
<span style="color: #0600FF;">public</span> <span style="color: #FF0000;">class</span> PersonService <span style="color: #008000;">:</span> WebService
<span style="color: #000000;">&#123;</span>
  <span style="color: #000000;">&#91;</span>WebMethod<span style="color: #000000;">&#93;</span>
  <span style="color: #0600FF;">public</span> Person GetDave<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>
  <span style="color: #000000;">&#123;</span>
    Person dave <span style="color: #008000;">=</span> <span style="color: #008000;">new</span> Person<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
    dave.<span style="color: #0000FF;">FirstName</span> <span style="color: #008000;">=</span> Dave<span style="color: #008000;">;</span>
    dave.<span style="color: #0000FF;">LastName</span> <span style="color: #008000;">=</span> Ward<span style="color: #008000;">;</span>
&nbsp;
    <span style="color: #008080; font-style: italic;">// So easy!</span>
    <span style="color: #0600FF;">return</span> dave<span style="color: #008000;">;</span>
  <span style="color: #000000;">&#125;</span>
<span style="color: #000000;">&#125;</span></pre></div></div>

<p>As long as you call that service method through a ScriptManager&#8217;s service proxy or u<a href="http://encosia.com/2008/03/27/using-jquery-to-consume-aspnet-json-web-services/">sing the correct parameters when using a library like jQuery</a>, ASP.NET will automatically serialize the Person object and return it as raw, unencumbered JSON.</p>
<h4>Accepting an object from the client-side</h4>
<p>Accepting a Person object from the client-side works identically, in reverse. ASP.NET does a great job of matching JSON-serialized request parameters to .NET&#8217;s types, collections, and even your own custom objects.</p>
<p>For example this is how you could accept a Person object, which would even then allow you to call that object&#8217;s custom methods:</p>

<div class="wp_syntax"><div class="code"><pre class="csharp" style="font-family:monospace;"><span style="color: #000000;">&#91;</span>ScriptService<span style="color: #000000;">&#93;</span>
<span style="color: #0600FF;">public</span> <span style="color: #FF0000;">class</span> PersonService <span style="color: #008000;">:</span> WebService
<span style="color: #000000;">&#123;</span>
  <span style="color: #000000;">&#91;</span>WebMethod<span style="color: #000000;">&#93;</span>
  <span style="color: #0600FF;">public</span> <span style="color: #0600FF;">void</span> SavePerson<span style="color: #000000;">&#40;</span>Person PersonToSave<span style="color: #000000;">&#41;</span>
  <span style="color: #000000;">&#123;</span>
    <span style="color: #008080; font-style: italic;">// No, really, that's it (assuming Person has a Save() method).</span>
    PersonToSave.<span style="color: #0000FF;">Save</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #008000;">;</span>
  <span style="color: #000000;">&#125;</span>
<span style="color: #000000;">&#125;</span></pre></div></div>

<p>For more information about how to implement this on both server- and client-side, I recommend reading my old, but still-relevant, post about <a href="http://encosia.com/2009/04/07/using-complex-types-to-make-calling-services-less-complex/">using objects to simplify calling ASP.NET services</a>.</p>
<h3>My request to you</h3>
<p>I don&#8217;t know where the manual [de]serialization approach is coming from, but it seems to be gaining traction lately based on what I&#8217;ve seen on Stack Overflow and the ASP.NET forums.  I must assume there are tutorials out there with sample code showing that approach, or valid approaches within ASHX handlers are being mistaken for the proper solution across the board.</p>
<p>Whatever the source, I can only find and correct a fraction of the postings and questions containing this mistake myself.  If you notice an instance of these mistakes that has not been corrected, please take a moment and point them toward this post.</p>
<p>Together, hopefully we can stop the spread of this particular mistake.</p>


<p>Related posts:<ol><li><a href='http://encosia.com/2010/05/31/asmx-scriptservice-mistake-invalid-json-primitive/' rel='bookmark' title='Permanent Link: ASMX ScriptService mistake &#8211; Invalid JSON primitive'>ASMX ScriptService mistake &#8211; Invalid JSON primitive</a></li>
<li><a href='http://encosia.com/2009/04/07/using-complex-types-to-make-calling-services-less-complex/' rel='bookmark' title='Permanent Link: Using complex types to make calling services less&#8230; complex'>Using complex types to make calling services less&#8230; complex</a></li>
<li><a href='http://encosia.com/2009/02/10/a-breaking-change-between-versions-of-aspnet-ajax/' rel='bookmark' title='Permanent Link: A breaking change between versions of ASP.NET AJAX'>A breaking change between versions of ASP.NET AJAX</a></li>
</ol></p><hr />

<p>You've been reading <a href="http://encosia.com/2011/04/13/asp-net-web-services-mistake-manual-json-serialization/">ASP.NET web services mistake: manual JSON serialization</a>, originally posted at <a href="http://encosia.com">Encosia</a>.  I hope you enjoyed it, and thanks for reading.</p>

<p>If you've got any feedback, please click through and leave a comment; I'd love to hear from you. You can <a href="http://encosia.com/2011/04/13/asp-net-web-services-mistake-manual-json-serialization/#post-commentblock">click here to jump directly to the comment section of this post</a>.</p><div class="feedflare">
<a href="http://feeds.encosia.com/~ff/Encosia?a=crq75ffH6JI:EKvSaBg8ZUg:D7DqB2pKExk"><img src="http://feeds.feedburner.com/~ff/Encosia?i=crq75ffH6JI:EKvSaBg8ZUg:D7DqB2pKExk" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=crq75ffH6JI:EKvSaBg8ZUg:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=crq75ffH6JI:EKvSaBg8ZUg:aWKiLpGymzw"><img src="http://feeds.feedburner.com/~ff/Encosia?d=aWKiLpGymzw" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=crq75ffH6JI:EKvSaBg8ZUg:30RXbuXOgYA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=30RXbuXOgYA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=crq75ffH6JI:EKvSaBg8ZUg:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Encosia?i=crq75ffH6JI:EKvSaBg8ZUg:F7zBnMyn0Lo" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=crq75ffH6JI:EKvSaBg8ZUg:gIN9vFwOqvQ"><img src="http://feeds.feedburner.com/~ff/Encosia?i=crq75ffH6JI:EKvSaBg8ZUg:gIN9vFwOqvQ" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Encosia/~4/crq75ffH6JI" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:90:"http://encosia.com/2011/04/13/asp-net-web-services-mistake-manual-json-serialization/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"23";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:85:"http://encosia.com/2011/04/13/asp-net-web-services-mistake-manual-json-serialization/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:2;a:6:{s:4:"data";s:41:"
		
		
		
		
		
				

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:56:"In JavaScript, curly brace placement matters: An example";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:51:"http://feeds.encosia.com/~r/Encosia/~3/y-p9EC_e19k/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:94:"http://encosia.com/2011/03/21/in-javascript-curly-brace-placement-matters-an-example/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Mon, 21 Mar 2011 18:46:27 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:1:{i:0;a:5:{s:4:"data";s:10:"JavaScript";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:26:"http://encosia.com/?p=1094";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:1114:"If you&#8217;ve been working with JavaScript very long, you probably know that you should format curly braces in JavaScript code a certain way. In fact, if you&#8217;ve watched my TekPub series, Mastering jQuery, you&#8217;ve heard me stop James and remind him that at the beginning of nearly every episode. However, you&#8217;re less likely to have [...]


Related posts:<ol><li><a href='http://encosia.com/2011/03/14/use-jquery-to-extract-data-from-html-lists-and-tables/' rel='bookmark' title='Permanent Link: Use jQuery to extract data from HTML lists and tables'>Use jQuery to extract data from HTML lists and tables</a></li>
<li><a href='http://encosia.com/2009/02/16/review-the-best-javascript-book-i%e2%80%99ve-read/' rel='bookmark' title='Permanent Link: Review: The best JavaScript book I’ve read'>Review: The best JavaScript book I’ve read</a></li>
<li><a href='http://encosia.com/2009/02/10/a-breaking-change-between-versions-of-aspnet-ajax/' rel='bookmark' title='Permanent Link: A breaking change between versions of ASP.NET AJAX'>A breaking change between versions of ASP.NET AJAX</a></li>
</ol>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:9:"Dave Ward";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:10195:"<p>If you&#8217;ve been working with JavaScript very long, you probably know that you should format curly braces in JavaScript code a certain way. In fact, if you&#8217;ve watched my TekPub series, <a href="http://tekpub.com/productions/jquery" target="_blank">Mastering jQuery</a>, you&#8217;ve heard me stop James and remind him that at the beginning of nearly every episode.</p>
<p>However, you&#8217;re less likely to have seen a clear example of <strong>why this matters or why you should care</strong>. Even when you hear advice from a trusted source, it can be difficult to heed that advice if it seems like hearsay or convention for the sake of convention.</p>
<p>While I was working on <a href="http://encosia.com/2011/03/14/use-jquery-to-extract-data-from-html-lists-and-tables/">my recent post about extracting data objects from HTML structures</a>, it occurred to me that some of its example code presented a great learning opportunity regarding this topic. So, I want to take advantage of that opportunity to show you <strong>a concrete example of how placing your braces on the wrong line can break your JavaScript code</strong>.</p>
<h3>Allman, K&#038;R, and you</h3>
<p>The specific part of the previous post that I want to talk about is this:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #000066; font-weight: bold;">return</span> <span style="color: #009900;">&#123;</span>
  id<span style="color: #339933;">:</span> $item.<span style="color: #660066;">data</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'id'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span>
  text<span style="color: #339933;">:</span> $item.<span style="color: #660066;">text</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span></pre></div></div>

<p>Notice how the opening brace in the object literal is on the same line as the <code>return</code> statement.</p>
<p>Placing opening braces on the same line as their corresponding control statements like that is called <a href="http://en.wikipedia.org/wiki/Indent_style#K.26R_style" target="_blank" rel="nofollow">K&#038;R style</a>. Unlike most differences in coding style &#8211; most amounting to personal preference &#8211; using K&#038;R style braces in JavaScript is important for an objective reason.</p>
<p>That reason is well-illustrated by looking at the alternative style in this case. That alternative, <a href="http://en.wikipedia.org/wiki/Indent_style#Allman_style_.28bsd_in_Emacs.29" target="_blank" rel="nofollow">Allman style</a>, is a style that&#8217;s more common in languages like C#. Allman style braces are placed alone, at the beginning of the line immediately <em>after</em> a control statement.</p>
<p>Modifying the previous code to use Allman style braces would look like this:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #000066; font-weight: bold;">return</span>
<span style="color: #009900;">&#123;</span>
  id<span style="color: #339933;">:</span> $item.<span style="color: #660066;">data</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'id'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span>
  text<span style="color: #339933;">:</span> $item.<span style="color: #660066;">text</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span></pre></div></div>

<p><strong>That code is now broken.</strong>  Though you can usually get away with using Allman style braces in JavaScript, returning object literals is an example of when you cannot.</p>
<h3>JavaScript semicolon insertion can ruin your day</h3>
<p>The culprit here is JavaScript&#8217;s infamous semicolon insertion feature. A JavaScript interpreter will parse <code>return\n</code> as a complete statement, assume that you forgot a semicolon at the end, and then treat it as <code>return;\n</code> instead.</p>
<p>In other words, when you write this:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #000066; font-weight: bold;">return</span>
<span style="color: #009900;">&#123;</span>
  id<span style="color: #339933;">:</span> $item.<span style="color: #660066;">data</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'id'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span>
  text<span style="color: #339933;">:</span> $item.<span style="color: #660066;">text</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span></pre></div></div>

<p>It&#8217;s actually interpreted as if you had written this:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #000066; font-weight: bold;">return</span><span style="color: #339933;">;</span> <span style="color: #006600; font-style: italic;">// Waiter, I didn't order this semicolon!</span>
<span style="color: #009900;">&#123;</span>
  id<span style="color: #339933;">:</span> $item.<span style="color: #660066;">data</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'id'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span>
  text<span style="color: #339933;">:</span> $item.<span style="color: #660066;">text</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span></pre></div></div>

<p>The insidious result is that almost all browsers will allow the code to execute, but the prematurely terminated return statement will return <code>undefined</code> instead of the object you&#8217;d expect.  No syntax error, no warning; just a chunk of &#8220;working&#8221; code that behaves inexplicably.</p>
<h3>Conclusion</h3>
<p>Since this problem manifests itself as an <code>undefined</code> return value, you can imagine how painful it can be to trace that back to an artifact of where the curly brace is located.  Unless you&#8217;re already aware of the semicolon insertion trap, brace placement is usually the last thing that you&#8217;d suspect to be the culprit in these situations.</p>
<p>The problem would have been even worse in <a href="http://encosia.com/2011/03/14/use-jquery-to-extract-data-from-html-lists-and-tables/">the larger example that this code excerpt was extracted from</a>. The object literal&#8217;s location within the <code>.map()</code> call would have obfuscated the root issue even farther since &#8220;mapping&#8221; a series of undefined return values would simply result in an empty array.</p>
<p>Key takeaway? <strong>Always use K&#038;R style braces in JavaScript</strong>, even if it&#8217;s not the style you prefer in other languages.</p>
<p>Allman braces bring zero objective value to the table. Using them out of personal preference isn&#8217;t worth the mental overhead of consistently remembering that they break when returning object literals, nor the debugging morass that will inevitably crop up when you aren&#8217;t paying close attention and muscle memory takes over.</p>


<p>Related posts:<ol><li><a href='http://encosia.com/2011/03/14/use-jquery-to-extract-data-from-html-lists-and-tables/' rel='bookmark' title='Permanent Link: Use jQuery to extract data from HTML lists and tables'>Use jQuery to extract data from HTML lists and tables</a></li>
<li><a href='http://encosia.com/2009/02/16/review-the-best-javascript-book-i%e2%80%99ve-read/' rel='bookmark' title='Permanent Link: Review: The best JavaScript book I’ve read'>Review: The best JavaScript book I’ve read</a></li>
<li><a href='http://encosia.com/2009/02/10/a-breaking-change-between-versions-of-aspnet-ajax/' rel='bookmark' title='Permanent Link: A breaking change between versions of ASP.NET AJAX'>A breaking change between versions of ASP.NET AJAX</a></li>
</ol></p><hr />

<p>You've been reading <a href="http://encosia.com/2011/03/21/in-javascript-curly-brace-placement-matters-an-example/">In JavaScript, curly brace placement matters: An example</a>, originally posted at <a href="http://encosia.com">Encosia</a>.  I hope you enjoyed it, and thanks for reading.</p>

<p>If you've got any feedback, please click through and leave a comment; I'd love to hear from you. You can <a href="http://encosia.com/2011/03/21/in-javascript-curly-brace-placement-matters-an-example/#post-commentblock">click here to jump directly to the comment section of this post</a>.</p><div class="feedflare">
<a href="http://feeds.encosia.com/~ff/Encosia?a=y-p9EC_e19k:tO0ttuLfLbk:D7DqB2pKExk"><img src="http://feeds.feedburner.com/~ff/Encosia?i=y-p9EC_e19k:tO0ttuLfLbk:D7DqB2pKExk" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=y-p9EC_e19k:tO0ttuLfLbk:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=y-p9EC_e19k:tO0ttuLfLbk:aWKiLpGymzw"><img src="http://feeds.feedburner.com/~ff/Encosia?d=aWKiLpGymzw" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=y-p9EC_e19k:tO0ttuLfLbk:30RXbuXOgYA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=30RXbuXOgYA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=y-p9EC_e19k:tO0ttuLfLbk:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Encosia?i=y-p9EC_e19k:tO0ttuLfLbk:F7zBnMyn0Lo" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=y-p9EC_e19k:tO0ttuLfLbk:gIN9vFwOqvQ"><img src="http://feeds.feedburner.com/~ff/Encosia?i=y-p9EC_e19k:tO0ttuLfLbk:gIN9vFwOqvQ" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Encosia/~4/y-p9EC_e19k" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:90:"http://encosia.com/2011/03/21/in-javascript-curly-brace-placement-matters-an-example/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"65";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:85:"http://encosia.com/2011/03/21/in-javascript-curly-brace-placement-matters-an-example/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:3;a:6:{s:4:"data";s:44:"
		
		
		
		
		
				
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:58:"Hear us talk about JavaScript on Hanselminutes episode 2^8";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:51:"http://feeds.encosia.com/~r/Encosia/~3/0PDAGbTW-hw/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:97:"http://encosia.com/2011/03/16/hear-us-talk-about-javascript-on-hanselminutes-episode-28/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Wed, 16 Mar 2011 20:45:50 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:2:{i:0;a:5:{s:4:"data";s:7:"General";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:10:"JavaScript";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:26:"http://encosia.com/?p=1096";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:1132:"I was talking JavaScript with Scott Hanselman recently, discussing different approaches to client-side development and the complications that surround them. Part way through, he decided that we, along with Elijah Manor, should sit down and make a podcast out of it. So, we did. It was just a touch nerve wracking to sit down and [...]


Related posts:<ol><li><a href='http://encosia.com/2011/05/02/hear-joe-stagner-and-i-talk-community-business-and-more/' rel='bookmark' title='Permanent Link: Hear Joe Stagner and I talk community, business, and more'>Hear Joe Stagner and I talk community, business, and more</a></li>
<li><a href='http://encosia.com/2009/06/20/hear-me-talk-about-jquery-on-the-polymorphic-podcast/' rel='bookmark' title='Permanent Link: Hear me talk about jQuery on the Polymorphic Podcast'>Hear me talk about jQuery on the Polymorphic Podcast</a></li>
<li><a href='http://encosia.com/2010/08/30/hear-me-talk-jquery-and-asp-net-on-the-jquery-podcast/' rel='bookmark' title='Permanent Link: Hear me talk jQuery and ASP.NET on the jQuery Podcast'>Hear me talk jQuery and ASP.NET on the jQuery Podcast</a></li>
</ol>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:9:"Dave Ward";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:4082:"<p>I was talking JavaScript with <a href="http://www.hanselman.com/blog/" target="_blank">Scott Hanselman</a> recently, discussing different approaches to client-side development and the complications that surround them.  Part way through, he decided that we, along with <a href="https://twitter.com/elijahmanor/" target="_blank" rel="nofollow">Elijah Manor</a>, should sit down and make a podcast out of it.</p>
<p>So, we did.</p>
<p>It was just a touch nerve wracking to sit down and record with no agenda, firm topic, or preparation, but Scott&#8217;s a pro and guided us smoothly through.  Within an hour of him saying &#8220;let&#8217;s record a podcast,&#8221; he had pulled recording equipment and a quiet room out of thin air, and we were finished.</p>
<p>If you&#8217;re a regular reader here, the discussion may be below your level of expertise, but it potentially good for sharing with colleagues who aren&#8217;t yet at your level on the client-side.</p>
<p>You can listen to it here: <a href="http://hanselminutes.com/default.aspx?showID=275" target="_blank">&lt;JavaScript and jQuery: Moving beyond Alert() /&gt;</a></p>
<p>Also be sure to check out Elijah&#8217;s summary of what we talked about, which includes links to most of the resources we discussed: <a href="http://www.elijahmanor.com/2011/03/hanselminutes-256-javascript-jquery.html" target="_blank">Hanselminutes #256: JavaScript &#038; jQuery: Moving beyond Alert()</a></p>


<p>Related posts:<ol><li><a href='http://encosia.com/2011/05/02/hear-joe-stagner-and-i-talk-community-business-and-more/' rel='bookmark' title='Permanent Link: Hear Joe Stagner and I talk community, business, and more'>Hear Joe Stagner and I talk community, business, and more</a></li>
<li><a href='http://encosia.com/2009/06/20/hear-me-talk-about-jquery-on-the-polymorphic-podcast/' rel='bookmark' title='Permanent Link: Hear me talk about jQuery on the Polymorphic Podcast'>Hear me talk about jQuery on the Polymorphic Podcast</a></li>
<li><a href='http://encosia.com/2010/08/30/hear-me-talk-jquery-and-asp-net-on-the-jquery-podcast/' rel='bookmark' title='Permanent Link: Hear me talk jQuery and ASP.NET on the jQuery Podcast'>Hear me talk jQuery and ASP.NET on the jQuery Podcast</a></li>
</ol></p><hr />

<p>You've been reading <a href="http://encosia.com/2011/03/16/hear-us-talk-about-javascript-on-hanselminutes-episode-28/">Hear us talk about JavaScript on Hanselminutes episode 2^8</a>, originally posted at <a href="http://encosia.com">Encosia</a>.  I hope you enjoyed it, and thanks for reading.</p>

<p>If you've got any feedback, please click through and leave a comment; I'd love to hear from you. You can <a href="http://encosia.com/2011/03/16/hear-us-talk-about-javascript-on-hanselminutes-episode-28/#post-commentblock">click here to jump directly to the comment section of this post</a>.</p><div class="feedflare">
<a href="http://feeds.encosia.com/~ff/Encosia?a=0PDAGbTW-hw:iOYPPC2c4Pk:D7DqB2pKExk"><img src="http://feeds.feedburner.com/~ff/Encosia?i=0PDAGbTW-hw:iOYPPC2c4Pk:D7DqB2pKExk" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=0PDAGbTW-hw:iOYPPC2c4Pk:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=0PDAGbTW-hw:iOYPPC2c4Pk:aWKiLpGymzw"><img src="http://feeds.feedburner.com/~ff/Encosia?d=aWKiLpGymzw" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=0PDAGbTW-hw:iOYPPC2c4Pk:30RXbuXOgYA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=30RXbuXOgYA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=0PDAGbTW-hw:iOYPPC2c4Pk:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Encosia?i=0PDAGbTW-hw:iOYPPC2c4Pk:F7zBnMyn0Lo" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=0PDAGbTW-hw:iOYPPC2c4Pk:gIN9vFwOqvQ"><img src="http://feeds.feedburner.com/~ff/Encosia?i=0PDAGbTW-hw:iOYPPC2c4Pk:gIN9vFwOqvQ" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Encosia/~4/0PDAGbTW-hw" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:93:"http://encosia.com/2011/03/16/hear-us-talk-about-javascript-on-hanselminutes-episode-28/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:1:"0";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:88:"http://encosia.com/2011/03/16/hear-us-talk-about-javascript-on-hanselminutes-episode-28/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:4;a:6:{s:4:"data";s:47:"
		
		
		
		
		
				
		
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:53:"Use jQuery to extract data from HTML lists and tables";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:51:"http://feeds.encosia.com/~r/Encosia/~3/fKWtf0SXzic/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:93:"http://encosia.com/2011/03/14/use-jquery-to-extract-data-from-html-lists-and-tables/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Mon, 14 Mar 2011 18:25:49 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:3:{i:0;a:5:{s:4:"data";s:10:"JavaScript";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:2:"UI";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:26:"http://encosia.com/?p=1085";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:1162:"A question that I&#8217;ve been seeing more frequently these days is how to extract a JavaScript object from an HTML list or table, given no data or information other than the markup. It&#8217;s not ideal to work backwards from HTML, but sometimes you just don&#8217;t have a lot of choice in the matter. Whether you&#8217;re [...]


Related posts:<ol><li><a href='http://encosia.com/2008/10/31/use-jquery-and-quicksearch-to-interactively-search-any-data/' rel='bookmark' title='Permanent Link: Use jQuery and quickSearch to interactively search any data'>Use jQuery and quickSearch to interactively search any data</a></li>
<li><a href='http://encosia.com/2008/08/13/how-to-easily-enhance-your-existing-tables-with-simple-css/' rel='bookmark' title='Permanent Link: How to easily enhance your existing tables with simple CSS'>How to easily enhance your existing tables with simple CSS</a></li>
<li><a href='http://encosia.com/2011/03/21/in-javascript-curly-brace-placement-matters-an-example/' rel='bookmark' title='Permanent Link: In JavaScript, curly brace placement matters: An example'>In JavaScript, curly brace placement matters: An example</a></li>
</ol>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:9:"Dave Ward";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:40852:"<p>A question that I&#8217;ve been seeing more frequently these days is how to extract a JavaScript object from an HTML list or table, given no data or information other than the markup. It&#8217;s not ideal to work backwards from HTML, but <strong>sometimes you just don&#8217;t have a lot of choice in the matter</strong>.</p>
<p>Whether you&#8217;re enhancing legacy elements that have been generated on the server-side or want to parse the output of a third-party DHTML widget, there are a variety of situations where converting HTML to raw data is a legitimate need. You may have seen iterative solutions to this problem before. However, nested looping code gets messy fast, doesn&#8217;t feel much like idiomatic jQuery, and certainly isn&#8217;t as concise as you&#8217;d probably like.</p>
<p>Luckily, one of JavaScript&#8217;s lesser-known utility methods and jQuery&#8217;s implementation of it can improve the situation quite a bit. In this post, I&#8217;m going to show you how to use this method, jQuery&#8217;s cross-browser solution, and how to use it to extract data objects from arbitrary HTML lists and tables.</p>
<h3>Array.map()</h3>
<p>It turns out that there&#8217;s a tool perfectly suited to the task of coercing one data structure into another: <strong>map</strong>.</p>
<p><a href="http://en.wikipedia.org/wiki/Map_(higher-order_function)" rel="nofollow" target="_blank">Map is a higher-order function</a> that allows you to transform the contents of a collection by applying a function to each item, capturing the result, and building a new collection of those results.</p>
<p>Map is a perfect tool for translating a collection full of extraneous data into a tightly-focused collection of exactly the desired subset. Even better, <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map" target="_blank">JavaScript 1.6 even includes a native implementation of map</a>, which is exposed as a method on the Array prototype.</p>
<p>For example, this is how you could use JavaScript 1.6&#8242;s Array.map() to analyze an array of strings and create a new array containing each string&#8217;s length:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #003366; font-weight: bold;">var</span> sites <span style="color: #339933;">=</span> <span style="color: #009900;">&#91;</span><span style="color: #3366CC;">'Encosia'</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'jQuery'</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'ASP.NET'</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'StackOverflow'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #006600; font-style: italic;">// For each site in the array, apply this function </span>
<span style="color: #006600; font-style: italic;">//  and build an array of the results.</span>
<span style="color: #003366; font-weight: bold;">var</span> lengths <span style="color: #339933;">=</span> sites.<span style="color: #660066;">map</span><span style="color: #009900;">&#40;</span><span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>site<span style="color: #339933;">,</span> index<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
  <span style="color: #006600; font-style: italic;">// Use the length of each name as its value in the new array.</span>
  <span style="color: #000066; font-weight: bold;">return</span> site.<span style="color: #660066;">length</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #006600; font-style: italic;">// This outputs: [7, 6, 7, 13]</span>
console.<span style="color: #660066;">log</span><span style="color: #009900;">&#40;</span>lengths<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>This is a very simple example, but you can probably already imagine applying that same technique to an array of list elements or table rows. The concise expressiveness of the map approach is great for paring away extraneous markup and extracting just underlying data.</p>
<h3>Mapping uncharted territory</h3>
<p>Unfortunately, JavaScript 1.6 and its map implementation is not something that you can count on being available in older browsers. Notably, Internet Explorer doesn&#8217;t provide an Array.map() implementation until IE9.</p>
<p>Though that is disappointing, map isn&#8217;t difficult to manually implement.  For example, this is <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map">a polyfill that the MDC recommends for patching Array.map() into older browsers</a>:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span>Array.<span style="color: #660066;">prototype</span>.<span style="color: #660066;">map</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
  Array.<span style="color: #660066;">prototype</span>.<span style="color: #660066;">map</span> <span style="color: #339933;">=</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>fun <span style="color: #009966; font-style: italic;">/*, thisp */</span><span style="color: #009900;">&#41;</span>  <span style="color: #009900;">&#123;</span>
    <span style="color: #3366CC;">&quot;use strict&quot;</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">this</span> <span style="color: #339933;">===</span> <span style="color: #000066; font-weight: bold;">void</span> <span style="color: #CC0000;">0</span> <span style="color: #339933;">||</span> <span style="color: #000066; font-weight: bold;">this</span> <span style="color: #339933;">===</span> <span style="color: #003366; font-weight: bold;">null</span><span style="color: #009900;">&#41;</span>
      <span style="color: #000066; font-weight: bold;">throw</span> <span style="color: #003366; font-weight: bold;">new</span> TypeError<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #003366; font-weight: bold;">var</span> t <span style="color: #339933;">=</span> Object<span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">this</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #003366; font-weight: bold;">var</span> len <span style="color: #339933;">=</span> t.<span style="color: #660066;">length</span> <span style="color: #339933;">&gt;&gt;&gt;</span> <span style="color: #CC0000;">0</span><span style="color: #339933;">;</span>
    <span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">typeof</span> fun <span style="color: #339933;">!==</span> <span style="color: #3366CC;">&quot;function&quot;</span><span style="color: #009900;">&#41;</span>
      <span style="color: #000066; font-weight: bold;">throw</span> <span style="color: #003366; font-weight: bold;">new</span> TypeError<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #003366; font-weight: bold;">var</span> res <span style="color: #339933;">=</span> <span style="color: #003366; font-weight: bold;">new</span> Array<span style="color: #009900;">&#40;</span>len<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #003366; font-weight: bold;">var</span> thisp <span style="color: #339933;">=</span> arguments<span style="color: #009900;">&#91;</span><span style="color: #CC0000;">1</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span>
    <span style="color: #000066; font-weight: bold;">for</span> <span style="color: #009900;">&#40;</span><span style="color: #003366; font-weight: bold;">var</span> i <span style="color: #339933;">=</span> <span style="color: #CC0000;">0</span><span style="color: #339933;">;</span> i <span style="color: #339933;">&lt;</span> len<span style="color: #339933;">;</span> i<span style="color: #339933;">++</span><span style="color: #009900;">&#41;</span>  <span style="color: #009900;">&#123;</span>
      <span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span>i <span style="color: #000066; font-weight: bold;">in</span> t<span style="color: #009900;">&#41;</span>
        res<span style="color: #009900;">&#91;</span>i<span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> fun.<span style="color: #660066;">call</span><span style="color: #009900;">&#40;</span>thisp<span style="color: #339933;">,</span> t<span style="color: #009900;">&#91;</span>i<span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span> i<span style="color: #339933;">,</span> t<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
&nbsp;
    <span style="color: #000066; font-weight: bold;">return</span> res<span style="color: #339933;">;</span>
  <span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span></pre></div></div>

<p>That&#8217;s a workable solution, but I doubt you&#8217;re very excited about the prospect of including all this code in your page. I know I wouldn&#8217;t be. </p>
<h4>jQuery has you covered</h4>
<p>If you&#8217;re already including jQuery in your pages, the good news is that jQuery has a built-in map implementation that works in every browser. In fact, jQuery provides two separate map methods: <a href="http://api.jquery.com/map/" target="_blank" rel="nofollow">one that&#8217;s specially suited to working with jQuery selections</a> and <a href="http://api.jquery.com/jQuery.map/" target="_blank" rel="nofollow">a general utility method</a> that&#8217;s more similar to the polyfill shown above.</p>
<p>For working with HTML, I&#8217;m going to focus on using the former: <code>.map()</code>.</p>
<p>To replicate the JavaScript 1.6 dependent example shown earlier, using jQuery&#8217;s implementation instead, the code would look like this:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #003366; font-weight: bold;">var</span> sites <span style="color: #339933;">=</span> <span style="color: #009900;">&#91;</span><span style="color: #3366CC;">'Encosia'</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'jQuery'</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'ASP.NET'</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'StackOverflow'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #006600; font-style: italic;">// Same as before, using jQuery's map() implementation.</span>
<span style="color: #003366; font-weight: bold;">var</span> lengths <span style="color: #339933;">=</span> $<span style="color: #009900;">&#40;</span>sites<span style="color: #009900;">&#41;</span>.<span style="color: #660066;">map</span><span style="color: #009900;">&#40;</span><span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>index<span style="color: #339933;">,</span> site<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
  <span style="color: #006600; font-style: italic;">// Use the length of each site name as its value in the new array.</span>
  <span style="color: #000066; font-weight: bold;">return</span> site.<span style="color: #660066;">length</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #006600; font-style: italic;">// This outputs: [7, 6, 7, 13]</span>
console.<span style="color: #660066;">log</span><span style="color: #009900;">&#40;</span>lengths<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<h4>Making &#8220;this&#8221; approach more concise</h3>
<p>To condense the code a bit, we can take advantage of the execution context within the callback function. During each callback, <code>this</code> holds the value of the array item currently being operated on. So, there&#8217;s no need to bother capturing the callback&#8217;s two input parameters:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #003366; font-weight: bold;">var</span> lengths <span style="color: #339933;">=</span> $<span style="color: #009900;">&#40;</span>sites<span style="color: #009900;">&#41;</span>.<span style="color: #660066;">map</span><span style="color: #009900;">&#40;</span><span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
  <span style="color: #006600; font-style: italic;">// &quot;this&quot; refers to the current array element as this callback is</span>
  <span style="color: #006600; font-style: italic;">//  applied to each array element.</span>
  <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">length</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>That isn&#8217;t a huge improvement, but every little bit helps and I&#8217;ll be using <code>this</code> in the examples throughout the rest of this post. So, I wanted to make sure what&#8217;s happening there is clear.</p>
<h4>Unwrapping the result of jQuery&#8217;s .map()</h4>
<p>The one quirk when using jQuery&#8217;s <code>.map()</code> method is that it sometimes returns a jQuery wrapped set; specifically, when you apply it to the result of a jQuery DOM selection. Even if your mapping function returns scalar values like strings and numbers, the end result of <code>.map()</code> will include the jQuery object prototype on each element.</p>
<p>That isn&#8217;t really a problem if you only intend to use that result immediately in your JavaScript code. However, the jQuery object prototype hanging off each element throws a wrench in the works if you try to use <code>JSON.stringify()</code> on the result of <code>.map()</code>. Since JSON serialization is such a common task when storing or transmitting JavaScript data, this quirk turns out to be a real issue.</p>
<p>The solution is to call <a href="http://api.jquery.com/get/">jQuery&#8217;s get() method</a> on those wrapped-array results, which boils them down to plain arrays.  When you see <code>.get()</code> tagged onto the end of the examples ahead, that&#8217;s why it&#8217;s there.</p>
<p>Now, let&#8217;s take a look at applying <code>.map()</code> to HTML and using it to extract data.</p>
<h3>Mapping the data within HTML unordered lists</h3>
<p>Using <code>.map()</code> against an unordered list is one of the most straightforward examples to start with. Imagine you had this simple HTML markup:</p>

<div class="wp_syntax"><div class="code"><pre class="html" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;ul&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;li&gt;</span></span>Item 1<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/li&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;li&gt;</span></span>Item 2<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/li&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;li&gt;</span></span>Item 3<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/li&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/ul&gt;</span></span></pre></div></div>

<p>To extract each of those items&#8217; displayed value, you could use <code>.map()</code> like this:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #006600; font-style: italic;">// Returns ['Item 1', 'Item 2', 'Item 3']</span>
$<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'li'</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">map</span><span style="color: #009900;">&#40;</span><span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
  <span style="color: #006600; font-style: italic;">// For each &lt;li&gt; in the list, return its inner text and let .map()</span>
  <span style="color: #006600; font-style: italic;">//  build an array of those values.</span>
  <span style="color: #000066; font-weight: bold;">return</span> $<span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">this</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">text</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">get</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>Complicating things slightly, maybe the list items also have an HTML5 data- attribute that you need to collect in addition to their values:</p>

<div class="wp_syntax"><div class="code"><pre class="html" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;ul&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;li</span> data-<span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;123&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>Item 1<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/li&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;li</span> data-<span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;456&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>Item 2<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/li&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;li</span> data-<span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;789&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>Item 3<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/li&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/ul&gt;</span></span></pre></div></div>

<p>Using <code>.map()</code> to extract that more complex data is just as easy:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #006600; font-style: italic;">// Returns [{id: 123, text: 'Item 1'}, </span>
<span style="color: #006600; font-style: italic;">//          {id: 456, text: 'Item 2'},</span>
<span style="color: #006600; font-style: italic;">//          {id: 789, text: 'Item 3'}]</span>
$<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'li'</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">map</span><span style="color: #009900;">&#40;</span><span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
  <span style="color: #006600; font-style: italic;">// $(this) is used more than once; cache it for performance.</span>
  <span style="color: #003366; font-weight: bold;">var</span> $item <span style="color: #339933;">=</span> $<span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">this</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
  <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #009900;">&#123;</span> 
    <span style="color: #006600; font-style: italic;">// Note: using .data() to read HTML5 data- attributes </span>
    <span style="color: #006600; font-style: italic;">//  requires jQuery 1.4.3+. Use attr() in older versions.</span>
    id<span style="color: #339933;">:</span> $item.<span style="color: #660066;">data</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'id'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> 
    text<span style="color: #339933;">:</span> $item.<span style="color: #660066;">text</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
  <span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">get</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>As you can see, <code>.map()</code> is a powerful tool for concisely pulling arbitrary bits of data together into a useful structure. You could certainly do this with a temp variable and for-loop, but <strong>it&#8217;s hard to beat the clean expressiveness this approach lends your code</strong>.</p>
<div class="aside">
<p>There&#8217;s a great JavaScript learning opportunity in the code above, but it&#8217;s on a bit of a tangent.  Rather than let this post run even longer, I wrote about that in a separate post.  If you&#8217;re interested in how an innocuous change to the location of one curly brace in the preceding code can transparently break it, that post is for you.</p>
<p>You can find that post here: <a href="http://encosia.com/2011/03/21/in-javascript-curly-brace-placement-matters-an-example/">In JavaScript, curly brace placement matters: An example</a>.</p>
</div>
<h3>Extracting data from HTML tables</h3>
<p>Working with the lists is good for a simple example, but what if we need to apply this technique to an HTML structure that&#8217;s more complex than an unordered list?</p>
<p>HTML tables are one of the most common targets for this technique. It&#8217;s not unusual to end up with a pre-rendered table that was generated off-page and to desire a client-side data structure representing that table&#8217;s data.</p>
<p>For example, here&#8217;s a tabular representation of the same data contained in the second list example:</p>

<div class="wp_syntax"><div class="code"><pre class="html" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;table</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;myTable&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;thead&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tr&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;th&gt;</span></span>id<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/th&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;th&gt;</span></span>text<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/th&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tr&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/thead&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tbody&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tr&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>123<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>Item 1<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tr&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tr&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>456<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>Item 2<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tr&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tr&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>789<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>Item 3<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tr&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tbody&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/table&gt;</span></span></pre></div></div>

<p>If you wanted to boil that table down to exactly the same JavaScript object shown in the second list example, this <code>.map()</code> usage would do the trick:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #006600; font-style: italic;">// Returns [{id: 123, text: 'Item 1'}, </span>
<span style="color: #006600; font-style: italic;">//          {id: 456, text: 'Item 2'},</span>
<span style="color: #006600; font-style: italic;">//          {id: 789, text: 'Item 3'}]</span>
$<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'#myTable tbody tr'</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">map</span><span style="color: #009900;">&#40;</span><span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
  <span style="color: #006600; font-style: italic;">// $(this) is used more than once; cache it for performance.</span>
  <span style="color: #003366; font-weight: bold;">var</span> $row <span style="color: #339933;">=</span> $<span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">this</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
  <span style="color: #006600; font-style: italic;">// For each row that's &quot;mapped&quot;, return an object that</span>
  <span style="color: #006600; font-style: italic;">//  describes the first and second &lt;td&gt; in the row.</span>
  <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #009900;">&#123;</span>
    id<span style="color: #339933;">:</span> $row.<span style="color: #660066;">find</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">':nth-child(1)'</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">text</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span>
    text<span style="color: #339933;">:</span> $row.<span style="color: #660066;">find</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">':nth-child(2)'</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">text</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
  <span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">get</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>The key to making this approach work is using the <code>:nth-child</code> selector to index into each row and retrieve the contents of the cells we&#8217;re interested in. This is very similar to how we handled the unordered list earlier, but can be applied to arbitrarily large structures such as wide HTML tables.</p>
<p>If you use this approach, one thing to <strong>keep in mind is that <code>:nth-child</code> uses one-based indexing</strong>. So, you must use <code>:nth-child(1)</code> to select the first cell, not <code>:nth-child(0)</code> as you might expect.</p>
<h3>A general solution for tables</h3>
<p>Using hard coded <code>:nth-child</code> selectors works well enough in simple scenarios, but it&#8217;s brittle. If the table structure changes, relying on a certain table layout will break. Hard coding the selectors for each column also becomes tedious when dealing with wider tables that have many columns.</p>
<p>So, as you apply this technique to larger or less predictable tables, <strong>you may desire a more general solution for extracting the data</strong>. One way of doing that is using the table&#8217;s column heading cells to build a basic schema of the table&#8217;s data.</p>
<p>Assuming your table has a proper <code>&lt;thead&gt;</code>, this is how you could extract an array of its column headings to use as a schema for mapping the rest of the table&#8217;s data:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #003366; font-weight: bold;">var</span> columns <span style="color: #339933;">=</span> $<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'#myTable thead th'</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">map</span><span style="color: #009900;">&#40;</span><span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
  <span style="color: #006600; font-style: italic;">// This assumes that your headings are suitable to be used as</span>
  <span style="color: #006600; font-style: italic;">//  JavaScript object keys. If the headings contain characters </span>
  <span style="color: #006600; font-style: italic;">//  that would be invalid, such as spaces or dashes, you should</span>
  <span style="color: #006600; font-style: italic;">//  use a regex here to strip those characters out.</span>
  <span style="color: #000066; font-weight: bold;">return</span> $<span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">this</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">text</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>With that column list handy, we can determine which column <em>name</em> any cell in the table should be filed under, given nothing more than its index in the row. Now we can automate the process that previously required those <code>:nth-child</code> selectors:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #003366; font-weight: bold;">var</span> tableObject <span style="color: #339933;">=</span> $<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'#myTable tbody tr'</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">map</span><span style="color: #009900;">&#40;</span><span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>i<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
  <span style="color: #003366; font-weight: bold;">var</span> row <span style="color: #339933;">=</span> <span style="color: #009900;">&#123;</span><span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span>
&nbsp;
  <span style="color: #006600; font-style: italic;">// Find all of the table cells on this row.</span>
  $<span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">this</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">find</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'td'</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">each</span><span style="color: #009900;">&#40;</span><span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>i<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #006600; font-style: italic;">// Determine the cell's column name by comparing its index</span>
    <span style="color: #006600; font-style: italic;">//  within the row with the columns list we built previously.</span>
    <span style="color: #003366; font-weight: bold;">var</span> rowName <span style="color: #339933;">=</span> columns<span style="color: #009900;">&#91;</span>i<span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #006600; font-style: italic;">// Add a new property to the row object, using this cell's</span>
    <span style="color: #006600; font-style: italic;">//  column name as the key and the cell's text as the value.</span>
    row<span style="color: #009900;">&#91;</span>rowName<span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> $<span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">this</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">text</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
  <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
  <span style="color: #006600; font-style: italic;">// Finally, return the row's object representation, to be included</span>
  <span style="color: #006600; font-style: italic;">//  in the array that $.map() ultimately returns.</span>
  <span style="color: #000066; font-weight: bold;">return</span> row<span style="color: #339933;">;</span>
&nbsp;
<span style="color: #006600; font-style: italic;">// Don't forget .get() to convert the jQuery set to a regular array.</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">get</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>That&#8217;s it.</p>
<p>With all the comments, that looks like more work than it actually is.  Eleven lines of code for the entire ordeal isn&#8217;t bad considering that it will automatically handle the majority of tables you throw at it.</p>
<h3>Conclusion</h3>
<p>I&#8217;m going to stop here, before this gets any longer. I hope that you found this helpful and/or interesting.</p>
<p>Even if you don&#8217;t often convert HTML markup to JavaScript objects, do keep <code>.map()</code> in mind when you&#8217;re working with collections of any type.  When you need it, the notion of map is an extremely useful aspect of JavaScript&#8217;s functional nature, but often goes overlooked.</p>


<p>Related posts:<ol><li><a href='http://encosia.com/2008/10/31/use-jquery-and-quicksearch-to-interactively-search-any-data/' rel='bookmark' title='Permanent Link: Use jQuery and quickSearch to interactively search any data'>Use jQuery and quickSearch to interactively search any data</a></li>
<li><a href='http://encosia.com/2008/08/13/how-to-easily-enhance-your-existing-tables-with-simple-css/' rel='bookmark' title='Permanent Link: How to easily enhance your existing tables with simple CSS'>How to easily enhance your existing tables with simple CSS</a></li>
<li><a href='http://encosia.com/2011/03/21/in-javascript-curly-brace-placement-matters-an-example/' rel='bookmark' title='Permanent Link: In JavaScript, curly brace placement matters: An example'>In JavaScript, curly brace placement matters: An example</a></li>
</ol></p><hr />

<p>You've been reading <a href="http://encosia.com/2011/03/14/use-jquery-to-extract-data-from-html-lists-and-tables/">Use jQuery to extract data from HTML lists and tables</a>, originally posted at <a href="http://encosia.com">Encosia</a>.  I hope you enjoyed it, and thanks for reading.</p>

<p>If you've got any feedback, please click through and leave a comment; I'd love to hear from you. You can <a href="http://encosia.com/2011/03/14/use-jquery-to-extract-data-from-html-lists-and-tables/#post-commentblock">click here to jump directly to the comment section of this post</a>.</p><div class="feedflare">
<a href="http://feeds.encosia.com/~ff/Encosia?a=fKWtf0SXzic:SAOTStTWU0M:D7DqB2pKExk"><img src="http://feeds.feedburner.com/~ff/Encosia?i=fKWtf0SXzic:SAOTStTWU0M:D7DqB2pKExk" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=fKWtf0SXzic:SAOTStTWU0M:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=fKWtf0SXzic:SAOTStTWU0M:aWKiLpGymzw"><img src="http://feeds.feedburner.com/~ff/Encosia?d=aWKiLpGymzw" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=fKWtf0SXzic:SAOTStTWU0M:30RXbuXOgYA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=30RXbuXOgYA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=fKWtf0SXzic:SAOTStTWU0M:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Encosia?i=fKWtf0SXzic:SAOTStTWU0M:F7zBnMyn0Lo" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=fKWtf0SXzic:SAOTStTWU0M:gIN9vFwOqvQ"><img src="http://feeds.feedburner.com/~ff/Encosia?i=fKWtf0SXzic:SAOTStTWU0M:gIN9vFwOqvQ" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Encosia/~4/fKWtf0SXzic" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:89:"http://encosia.com/2011/03/14/use-jquery-to-extract-data-from-html-lists-and-tables/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"18";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:84:"http://encosia.com/2011/03/14/use-jquery-to-extract-data-from-html-lists-and-tables/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:5;a:6:{s:4:"data";s:44:"
		
		
		
		
		
				
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:22:"A VSDoc for jQuery 1.5";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:51:"http://feeds.encosia.com/~r/Encosia/~3/OPFSTni81mU/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:62:"http://encosia.com/2011/02/04/a-vsdoc-for-jquery-1-5/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Fri, 04 Feb 2011 19:46:09 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:2:{i:0;a:5:{s:4:"data";s:10:"JavaScript";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:26:"http://encosia.com/?p=1088";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:1037:"I’ve noticed several people looking for a jQuery 1.5 VSDoc this week. After looking around myself, I didn&#8217;t see one anywhere either. So, I updated Damian Edwards’ VsDocBuilder for jQuery 1.5 and generated a new VSDoc. It doesn’t handle the new jqXHR and Deferred return types quite right, so you won’t get Intellisense for the [...]


Related posts:<ol><li><a href='http://encosia.com/2009/05/13/what-aspnet-developers-should-know-about-jquery/' rel='bookmark' title='Permanent Link: What ASP.NET developers should know about jQuery'>What ASP.NET developers should know about jQuery</a></li>
<li><a href='http://encosia.com/2009/08/10/see-how-i-used-firebug-to-learn-jquery/' rel='bookmark' title='Permanent Link: See how I used Firebug to learn jQuery'>See how I used Firebug to learn jQuery</a></li>
<li><a href='http://encosia.com/2009/12/16/mastering-jquery-now-available-at-tekpub/' rel='bookmark' title='Permanent Link: Mastering jQuery now available at TekPub'>Mastering jQuery now available at TekPub</a></li>
</ol>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:9:"Dave Ward";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:3988:"<p><img style="border: 1px solid #ccc;" alt="Using the jQuery 1.5 VSDoc to get Intellisense in Visual Studio" src="http://encosia.com/blog/wp-content/uploads/2011/02/jQuery-1.5-vsdoc-in-action.png" width="490" height="155" /></p>
<p>I’ve noticed several people looking for a jQuery 1.5 VSDoc this week. After looking around myself, I didn&#8217;t see one anywhere either. So, I updated <a href="http://damianedwards.wordpress.com/2011/01/27/jquery-vsdoc-file-generator/">Damian Edwards’ VsDocBuilder</a> for jQuery 1.5 and generated a new VSDoc.</p>
<p>It doesn’t handle the new jqXHR and Deferred return types quite right, so you won’t get Intellisense for the new chained <code>$.ajax()</code> callbacks. However, it should be better than nothing until a fully functioning version is released.</p>
<p><strike>You can download it here: jQuery-1.5.0-vsdoc.js</strike></p>
<p><strong>Update</strong>: Damian has just made a fully functional version of the 1.5 VSDoc available (that was quick): <a href="http://damianedwards.com/files/jquery/jquery-1.5-vsdoc.js" target="_blank">jquery-1.5-vsdoc.js</a>. You should use his instead of mine.</p>
<p><em>Important</em>: This new VSDoc makes use of &lt;para&gt; tags to display line breaks inside documentation tooltips.  To view them properly, you&#8217;ll need to be sure that you have <a href="http://visualstudiogallery.msdn.microsoft.com/872d27ee-38c7-4a97-98dc-0d8a431cc2ed/" target="_blank" rel="nofollow">the JScript Editor Extensions</a> installed so that Visual Studio understands those new VSDoc tags.</p>


<p>Related posts:<ol><li><a href='http://encosia.com/2009/05/13/what-aspnet-developers-should-know-about-jquery/' rel='bookmark' title='Permanent Link: What ASP.NET developers should know about jQuery'>What ASP.NET developers should know about jQuery</a></li>
<li><a href='http://encosia.com/2009/08/10/see-how-i-used-firebug-to-learn-jquery/' rel='bookmark' title='Permanent Link: See how I used Firebug to learn jQuery'>See how I used Firebug to learn jQuery</a></li>
<li><a href='http://encosia.com/2009/12/16/mastering-jquery-now-available-at-tekpub/' rel='bookmark' title='Permanent Link: Mastering jQuery now available at TekPub'>Mastering jQuery now available at TekPub</a></li>
</ol></p><hr />

<p>You've been reading <a href="http://encosia.com/2011/02/04/a-vsdoc-for-jquery-1-5/">A VSDoc for jQuery 1.5</a>, originally posted at <a href="http://encosia.com">Encosia</a>.  I hope you enjoyed it, and thanks for reading.</p>

<p>If you've got any feedback, please click through and leave a comment; I'd love to hear from you. You can <a href="http://encosia.com/2011/02/04/a-vsdoc-for-jquery-1-5/#post-commentblock">click here to jump directly to the comment section of this post</a>.</p><div class="feedflare">
<a href="http://feeds.encosia.com/~ff/Encosia?a=OPFSTni81mU:SZoxT62nv54:D7DqB2pKExk"><img src="http://feeds.feedburner.com/~ff/Encosia?i=OPFSTni81mU:SZoxT62nv54:D7DqB2pKExk" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=OPFSTni81mU:SZoxT62nv54:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=OPFSTni81mU:SZoxT62nv54:aWKiLpGymzw"><img src="http://feeds.feedburner.com/~ff/Encosia?d=aWKiLpGymzw" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=OPFSTni81mU:SZoxT62nv54:30RXbuXOgYA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=30RXbuXOgYA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=OPFSTni81mU:SZoxT62nv54:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Encosia?i=OPFSTni81mU:SZoxT62nv54:F7zBnMyn0Lo" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=OPFSTni81mU:SZoxT62nv54:gIN9vFwOqvQ"><img src="http://feeds.feedburner.com/~ff/Encosia?i=OPFSTni81mU:SZoxT62nv54:gIN9vFwOqvQ" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Encosia/~4/OPFSTni81mU" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:58:"http://encosia.com/2011/02/04/a-vsdoc-for-jquery-1-5/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"14";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:53:"http://encosia.com/2011/02/04/a-vsdoc-for-jquery-1-5/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:6;a:6:{s:4:"data";s:47:"
		
		
		
		
		
				
		
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:61:"jQuery 1.5′s AJAX rewrite and ASP.NET services: All is well";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:51:"http://feeds.encosia.com/~r/Encosia/~3/wb7kal7add8/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:97:"http://encosia.com/2011/02/02/jquery-1-5s-ajax-rewrite-and-asp-net-services-all-is-well/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Wed, 02 Feb 2011 16:24:57 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:3:{i:0;a:5:{s:4:"data";s:4:"AJAX";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:7:"ASP.NET";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:26:"http://encosia.com/?p=1086";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:1169:"jQuery 1.5&#8242;s complete overhaul of the AJAX API has led to several people contacting me recently, understandably nervous about how the rewrite will impact working with ASMX ScriptServices and ASPX page methods. Seeing the default calling syntax change to $.ajax(url, settings) was especially unsettling to many. I&#8217;m happy to report that the short answer is: [...]


Related posts:<ol><li><a href='http://encosia.com/2009/07/21/simplify-calling-asp-net-ajax-services-from-jquery/' rel='bookmark' title='Permanent Link: Simplify calling ASP.NET AJAX services from jQuery'>Simplify calling ASP.NET AJAX services from jQuery</a></li>
<li><a href='http://encosia.com/2009/04/07/using-complex-types-to-make-calling-services-less-complex/' rel='bookmark' title='Permanent Link: Using complex types to make calling services less&#8230; complex'>Using complex types to make calling services less&#8230; complex</a></li>
<li><a href='http://encosia.com/2008/03/27/using-jquery-to-consume-aspnet-json-web-services/' rel='bookmark' title='Permanent Link: Using jQuery to Consume ASP.NET JSON Web Services'>Using jQuery to Consume ASP.NET JSON Web Services</a></li>
</ol>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:9:"Dave Ward";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:19452:"<p>jQuery 1.5&#8242;s complete overhaul of the AJAX API has led to several people contacting me recently, understandably nervous about how the rewrite will impact working with ASMX ScriptServices and ASPX page methods.  Seeing the default calling syntax change to <code>$.ajax(url, settings)</code> was especially unsettling to many.</p>
<p>I&#8217;m happy to report that the short answer is: <strong>jQuery 1.5&#8242;s new AJAX module has almost no negative impact on any of the techniques you may have read about here</strong>.  The rewrite maintains very good compatibility for the <code>$.ajax(settings)</code> calling syntax and for now-deprecated features such as dataFilters.</p>
<p>One advanced dataFilter usage appears to be broken, but it&#8217;s something that you probably already stopped using with jQuery 1.4. To be clear, I&#8217;ll briefly enumerate all of the techniques I&#8217;ve re-tested and jQuery 1.5&#8242;s impact (or lack thereof) on each.</p>
<h3>ASMX ScriptServices and ASPX page methods</h3>
<p>The most common way of using jQuery to communicate with an ASP.NET WebForms application today is to use an ASMX ScriptService or ASPX page method. If you&#8217;re <a href="http://encosia.com/2008/03/27/using-jquery-to-consume-aspnet-json-web-services/">requesting an ASMX ScriptService using the approach I originally described</a>:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;">$.<span style="color: #660066;">ajax</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span>
  type<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;POST&quot;</span><span style="color: #339933;">,</span>
  contentType<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;application/json&quot;</span><span style="color: #339933;">,</span>
  url<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;/YourService.asmx/YourMethod&quot;</span><span style="color: #339933;">,</span>
  data<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;{}&quot;</span><span style="color: #339933;">,</span>
  dataType<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;json&quot;</span><span style="color: #339933;">,</span>
  success<span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>msg<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    console.<span style="color: #660066;">log</span><span style="color: #009900;">&#40;</span>msg.<span style="color: #660066;">d</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
  <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>That code will continue to work exactly as-is with jQuery 1.5. If you prefer <a href="http://encosia.com/2008/05/29/using-jquery-to-directly-call-aspnet-ajax-page-methods/">page methods</a> instead, you&#8217;re in the clear too.</p>
<p><em>Note: You can simplify the contentType parameter to &#8220;application/json&#8221; when using any version. The ScriptService handler only checks that the header contains &#8220;application/json&#8221;, not for an exact string match. It&#8217;s a small improvement, but noticeably easier to remember and type.</em> </p>
<h3>DTOs and JSON.stringify()</h3>
<p>If you&#8217;re using jQuery and ASP.NET JSON endpoints to accomplish more complicated tasks, you may be <a href="http://encosia.com/2009/04/07/using-complex-types-to-make-calling-services-less-complex/">using JSON.stringify() to simplify making requests that include data transfer objects</a>. Paired with corresponding complex types or collections on the server-side, this approach seems almost too good to be true:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #003366; font-weight: bold;">var</span> NewPerson <span style="color: #339933;">=</span> <span style="color: #009900;">&#123;</span> <span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span>
&nbsp;
NewPerson.<span style="color: #660066;">FirstName</span> <span style="color: #339933;">=</span> $<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#FirstName&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">val</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
NewPerson.<span style="color: #660066;">LastName</span> <span style="color: #339933;">=</span> $<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#LastName&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">val</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
NewPerson.<span style="color: #660066;">Address</span> <span style="color: #339933;">=</span> $<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#Address&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">val</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
NewPerson.<span style="color: #660066;">City</span> <span style="color: #339933;">=</span> $<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#City&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">val</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
NewPerson.<span style="color: #660066;">State</span> <span style="color: #339933;">=</span> $<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#State&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">val</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
NewPerson.<span style="color: #660066;">Zip</span> <span style="color: #339933;">=</span> $<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#Zip&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">val</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #003366; font-weight: bold;">var</span> DTO <span style="color: #339933;">=</span> <span style="color: #009900;">&#123;</span> <span style="color: #3366CC;">'Person'</span> <span style="color: #339933;">:</span> NewPerson <span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span>
&nbsp;
$.<span style="color: #660066;">ajax</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span>
  type<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;POST&quot;</span><span style="color: #339933;">,</span>
  contentType<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;application/json; charset=utf-8&quot;</span><span style="color: #339933;">,</span>
  url<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;PersonService.asmx/AddPerson&quot;</span><span style="color: #339933;">,</span>
  data<span style="color: #339933;">:</span> JSON.<span style="color: #660066;">stringify</span><span style="color: #009900;">&#40;</span>DTO<span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span>
  dataType<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;json&quot;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>jQuery 1.5&#8242;s AJAX rewrite has not impacted that technique either.  If you provide a string value for its <code>data</code> parameter, jQuery will pass that string on to the server unmodified.</p>
<h3>dataFilters and &#8220;.d&#8221;</h3>
<p>With jQuery 1.5 fundamentally revamping <code>$.ajax()</code>&#8216;s extensibility model, the technique of <a href="http://encosia.com/2009/07/21/simplify-calling-asp-net-ajax-services-from-jquery/">using a dataFilter to normalize ASP.NET&#8217;s &#8220;.d&#8221; wrapper</a> is what I worried most about surviving the 1.5 transition. That approach looked like this:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;">$.<span style="color: #660066;">ajaxSetup</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span>
  type<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;POST&quot;</span><span style="color: #339933;">,</span>
  contentType<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;application/json; charset=utf-8&quot;</span><span style="color: #339933;">,</span>
  data<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;{}&quot;</span><span style="color: #339933;">,</span>
  dataFilter<span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>data<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span>msg.<span style="color: #660066;">hasOwnProperty</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'d'</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span>
      <span style="color: #000066; font-weight: bold;">return</span> msg.<span style="color: #660066;">d</span><span style="color: #339933;">;</span>
    <span style="color: #000066; font-weight: bold;">else</span>
      <span style="color: #000066; font-weight: bold;">return</span> msg<span style="color: #339933;">;</span>
  <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
$.<span style="color: #660066;">ajax</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span>
  url<span style="color: #339933;">:</span> <span style="color: #3366CC;">'YourService.asmx/YourMethod'</span><span style="color: #339933;">,</span>
  success<span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>response<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #006600; font-style: italic;">// You'll never have to worry about the response being </span>
    <span style="color: #006600; font-style: italic;">//  buried in response.d here.</span>
  <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>Though jQuery 1.5&#8242;s new <a href="http://api.jquery.com/extending-ajax/#Converters">converters</a> will probably enable a better solution, this dataFilter approach does continue to work in jQuery 1.5.</p>
<h3>dataFilters and JSON parsing</h3>
<p>While the simple dataFilter does work, if you&#8217;re <a href="http://encosia.com/2009/07/07/improving-jquery-json-performance-and-security/">using a dataFilter to implement custom JSON parsing</a>, you may need to make a small change.  What I mean by that is code like this:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;">$.<span style="color: #660066;">ajax</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span>
  <span style="color: #006600; font-style: italic;">// Your usual $.ajax() URL, data, dataType, etc.</span>
  dataFilter<span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>data<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">typeof</span> <span style="color: #009900;">&#40;</span>JSON<span style="color: #009900;">&#41;</span> <span style="color: #339933;">!==</span> <span style="color: #3366CC;">'undefined'</span> <span style="color: #339933;">&amp;&amp;</span> 
        <span style="color: #000066; font-weight: bold;">typeof</span> <span style="color: #009900;">&#40;</span>JSON.<span style="color: #660066;">parse</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">===</span> <span style="color: #3366CC;">'function'</span><span style="color: #009900;">&#41;</span>
      <span style="color: #000066; font-weight: bold;">return</span> JSON.<span style="color: #660066;">parse</span><span style="color: #009900;">&#40;</span>data<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #000066; font-weight: bold;">else</span>
      <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #000066; font-weight: bold;">eval</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'('</span> <span style="color: #339933;">+</span> data <span style="color: #339933;">+</span> <span style="color: #3366CC;">')'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
  <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>The usefulness of that approach dates back to jQuery 1.3 and earlier, when jQuery exclusively used <code>eval()</code> for deserializing JSON responses.  At that time, it was helpful to manually override the deserialization process to take advantage of browser-native implementations of <code>JSON.parse()</code> when available.  Doing so yielded both performance and security gains.</p>
<p>In jQuery 1.4, this was no longer necessary because jQuery contained a similar bit of browser-native parser testing code itself.  However, the dataFilter approach above did continue to work in jQuery 1.4 $.ajax() requests, so long as the dataType for the request was either omitted or set to a value that didn&#8217;t trigger jQuery&#8217;s automatic JSON deserialization (e.g. &#8220;text&#8221; or &#8220;foo&#8221;).</p>
<p>As of jQuery 1.5, <strong>using this dataFilter approach for manually controlling deserialization will no longer work if the request&#8217;s dataType is set to &#8220;json&#8221; or even omitted</strong>.</p>
<p>Except for the most obscure of edge cases, the best solution is simply to drop this code.  It&#8217;s redundant if you&#8217;re using jQuery 1.4.0 or later.  Again though, you <em>can</em> continue using a dataFilter to handle the &#8220;.d&#8221; issue.</p>
<h3>Conclusion</h3>
<p>For the most part, upgrading to jQuery 1.5 is a non-issue when it comes to using <code>$.ajax()</code> with ASP.NET JSON endpoints. Considering the fundamental nature of the module&#8217;s rewrite, it really is commendable how well backwards compatibility has been maintained.</p>
<p>Once you&#8217;ve vetted your existing code for compatibility with jQuery 1.5, do be sure to check out the powerful new features that have been added to <code>$.ajax()</code> in this rewrite.  Its new extension points, <a href="http://api.jquery.com/extending-ajax/#Prefilters">prefilters</a>, <a href="http://api.jquery.com/extending-ajax/#Converters">converters</a>, and <a href="http://api.jquery.com/extending-ajax/#Transports">transports</a>, will offer finer-grained control than ever before.</p>
<p>Even more exciting is the AJAX rewrite&#8217;s inclusion of &#8220;deferreds&#8221;.  You can count on seeing more about that here soon, but right now I highly recommend taking a look at <a href="http://www.erichynds.com/jquery/using-deferreds-in-jquery/">this post by Eric Hynds</a>.</p>
<p>If you&#8217;ve tested jQuery 1.5 in your own sites/projects, I&#8217;m curious if you&#8217;ve run into any issues I didn&#8217;t address.  Please do leave a comment if I&#8217;ve missed anything that caused you trouble in the upgrade.</p>


<p>Related posts:<ol><li><a href='http://encosia.com/2009/07/21/simplify-calling-asp-net-ajax-services-from-jquery/' rel='bookmark' title='Permanent Link: Simplify calling ASP.NET AJAX services from jQuery'>Simplify calling ASP.NET AJAX services from jQuery</a></li>
<li><a href='http://encosia.com/2009/04/07/using-complex-types-to-make-calling-services-less-complex/' rel='bookmark' title='Permanent Link: Using complex types to make calling services less&#8230; complex'>Using complex types to make calling services less&#8230; complex</a></li>
<li><a href='http://encosia.com/2008/03/27/using-jquery-to-consume-aspnet-json-web-services/' rel='bookmark' title='Permanent Link: Using jQuery to Consume ASP.NET JSON Web Services'>Using jQuery to Consume ASP.NET JSON Web Services</a></li>
</ol></p><hr />

<p>You've been reading <a href="http://encosia.com/2011/02/02/jquery-1-5s-ajax-rewrite-and-asp-net-services-all-is-well/">jQuery 1.5&#8242;s AJAX rewrite and ASP.NET services: All is well</a>, originally posted at <a href="http://encosia.com">Encosia</a>.  I hope you enjoyed it, and thanks for reading.</p>

<p>If you've got any feedback, please click through and leave a comment; I'd love to hear from you. You can <a href="http://encosia.com/2011/02/02/jquery-1-5s-ajax-rewrite-and-asp-net-services-all-is-well/#post-commentblock">click here to jump directly to the comment section of this post</a>.</p><div class="feedflare">
<a href="http://feeds.encosia.com/~ff/Encosia?a=wb7kal7add8:F6jGYytDfwo:D7DqB2pKExk"><img src="http://feeds.feedburner.com/~ff/Encosia?i=wb7kal7add8:F6jGYytDfwo:D7DqB2pKExk" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=wb7kal7add8:F6jGYytDfwo:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=wb7kal7add8:F6jGYytDfwo:aWKiLpGymzw"><img src="http://feeds.feedburner.com/~ff/Encosia?d=aWKiLpGymzw" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=wb7kal7add8:F6jGYytDfwo:30RXbuXOgYA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=30RXbuXOgYA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=wb7kal7add8:F6jGYytDfwo:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Encosia?i=wb7kal7add8:F6jGYytDfwo:F7zBnMyn0Lo" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=wb7kal7add8:F6jGYytDfwo:gIN9vFwOqvQ"><img src="http://feeds.feedburner.com/~ff/Encosia?i=wb7kal7add8:F6jGYytDfwo:gIN9vFwOqvQ" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Encosia/~4/wb7kal7add8" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:93:"http://encosia.com/2011/02/02/jquery-1-5s-ajax-rewrite-and-asp-net-services-all-is-well/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"21";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:88:"http://encosia.com/2011/02/02/jquery-1-5s-ajax-rewrite-and-asp-net-services-all-is-well/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:7;a:6:{s:4:"data";s:44:"
		
		
		
		
		
				
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:58:"Cripple the Google CDN’s caching with a single character";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:51:"http://feeds.encosia.com/~r/Encosia/~3/1E9Vjb9PqpE/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:95:"http://encosia.com/2011/01/19/cripple-the-google-cdns-caching-with-a-single-character/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Wed, 19 Jan 2011 17:18:30 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:2:{i:0;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:11:"Performance";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:26:"http://encosia.com/?p=1078";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:1144:"It&#8217;s no secret that I&#8217;m a proponent of using a shared CDN to host jQuery. As more and more sites take advantage of public CDNs for their jQuery reference, the cross-site caching benefit is becoming almost a given. However, there are a couple ways that even I recommend against using these public CDNs. With the [...]


Related posts:<ol><li><a href='http://encosia.com/2008/12/10/3-reasons-why-you-should-let-google-host-jquery-for-you/' rel='bookmark' title='Permanent Link: 3 reasons why you should let Google host jQuery for you'>3 reasons why you should let Google host jQuery for you</a></li>
<li><a href='http://encosia.com/2010/09/15/6953-reasons-why-i-still-let-google-host-jquery-for-me/' rel='bookmark' title='Permanent Link: 6,953 reasons why I still let Google host jQuery for me'>6,953 reasons why I still let Google host jQuery for me</a></li>
<li><a href='http://encosia.com/2010/08/18/dont-let-jquerys-document-ready-slow-you-down/' rel='bookmark' title='Permanent Link: Don&#8217;t let jQuery&#8217;s $(document).ready() slow you down'>Don&#8217;t let jQuery&#8217;s $(document).ready() slow you down</a></li>
</ol>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:9:"Dave Ward";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:12049:"<p>It&#8217;s no secret that I&#8217;m a proponent of <a href="http://encosia.com/2008/12/10/3-reasons-why-you-should-let-google-host-jquery-for-you/" target="_blank">using a shared CDN to host jQuery</a>. As more and more sites take advantage of public CDNs for their jQuery reference, the cross-site caching benefit is becoming almost a given. However, there are a couple ways that even I recommend <em>against</em> using these public CDNs.</p>
<p>With the impending <a href="http://blog.jquery.com/2010/12/30/hotlinking-to-be-disabled-on-jan-31-2011/" target="_blank">policy change on hotlinking copies of jQuery hosted on jQuery.com</a>, I expect that at least several sites will be migrating their hotlinked script references to one of the public CDNs soon. So, I think this is a good time to address one CDN-related usage mistake that I&#8217;ve seen an uptick in lately.</p>
<h3>Firesheep and SSL</h3>
<p>By now, you&#8217;ve probably heard about last year&#8217;s release of <a href="http://codebutler.com/firesheep" rel="nofollow" target="_blank">Firesheep</a>, a Firefox addon that sniffs out HTTP session cookies transmitted in cleartext, and the turmoil that it caused. Seeing someone hijack a stranger&#8217;s Twitter or Facebook identity with a single click is enough to make anyone more conscious about the security of their browsing habits.</p>
<p>Traditionally, most sites have used encrypted connections for authentication and sensitive information, to avoid transmitting passwords or private data in cleartext, but they generally avoid forcing SSL connections on most other pages. This lack of site-wide support is usually attributed to the (perceived) server-side overhead of encrypting every connection and the tedious mixed content warnings that browsers display when HTTPS pages contain references to unencrypted content.</p>
<p>However, with SSL certificates available for cheaper than ever, Firesheep having raised so much awareness, and the prevalent use of unsecured WiFi networks in public settings, many sites have responded by offering SSL encryption for pages on their entire sites.</p>
<p>Unfortunately, this recent proliferation of SSL usage has at least one performance drawback that isn’t necessary obvious at first glance.</p>
<h3>HTTPS and mixed content</h3>
<p>To ensure airtight security, <strong>pages served via SSL should contain no references to content served through unencrypted connections</strong>. The reasoning behind this rule is sound. After all, the browser has no way of knowing whether an image contains a chart with sensitive financial data or if a JavaScript include contains a JSON collection detailing the user&#8217;s medical history.</p>
<p>Different browsers react to mixed HTTP and HTTPS content with varying degrees of severity, with Internet Explorer being the most hostile, but every browser displays some type of warning by default. If you&#8217;re curious about how your browser handles the situation, navigate to <a href="https://encosia.com" target="_blank">https://encosia.com</a>.</p>
<p>Visiting my site via HTTPS retrieves the page’s content via a legitimately secured connection, encrypted with a valid SSL certificate. The catch is that its HTML contains insecure references to content such as CSS and images, which triggers the dreaded mixed content warning. The result is especially painful in Internet Explorer:</p>
<p><img src="http://encosia.com/blog/wp-content/uploads/2011/01/ie-mixed-content.png" width="492" height="232" /></p>
<p>It’s obvious why avoiding the mixed content warning is an absolute necessity for any serious public-facing site. </p>
<h3>An obvious solution</h3>
<p>In cases where a given page may potentially be served via either HTTP or HTTPS, path-relative URLs can be used to automatically choose the right protocol for on-site content. For example, references such as <code>/images/foo.png</code> and <code>/css/bar.css</code> will automatically adapt to the correct protocol based on what was used to load the underlying document containing them.</p>
<p>Utilizing off-site resources like advertisements, third-party widgets, and CDN hosted libraries can be a bit more frustrating though. Because their fully qualified URLs specify a protocol, it’s easy to run afoul of the mixed content rule when pages are available through both HTTP and HTTPS protocols. Even a single, innocuous HTTP reference is enough to completely break a page served via HTTPS.</p>
<p>Since the inverse case &#8211; secure references on an unsecured page &#8211; isn’t subject to any obvious penalties, a common solution is to simply use HTTPS exclusively when linking to off-site resources that support it. On the secure pages, the HTTPS reference avoids a mixed content warning, and it still appears to work fine on HTTP pages as well. On sites where a given page might be viewed using either HTTP or HTTPS, assuming HTTPS can be the quickest, easiest remedy to the mixed content problem.</p>
<p>Unfortunately, that approach is burdened by a significant performance drawback on unsecured pages, which may not be readily apparent.</p>
<h3>SSL == Super Slow Loading?</h3>
<p>Using the secure reference everywhere seems like a workable solution, but there&#8217;s a major problem with over-using SSL for cacheable, static resources (such as jQuery). For the same reasons that browsers require those assets to be encrypted in the first place, <strong>browsers do not cache files to disk if they’ve been retrieved via SSL</strong>.</p>
<p>Worse, even if the user has a locally cached copy of jQuery sitting on disk that was requested from Google’s CDN via HTTP, their browser will not utilize that local copy when it encounters an HTTPS reference to the same resource on the same server.</p>
<p>In other words, this URL:</p>

<div class="wp_syntax"><div class="code"><pre class="html" style="font-family:monospace;">http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js</pre></div></div>

<p>Is entirely different than the following one, as far as a browser is concerned, thus the two are not subject to <a href="http://encosia.com/2010/09/15/6953-reasons-why-i-still-let-google-host-jquery-for-me/" target="_blank">the sizable cross-caching benefit that comes with using Google’s CDN</a>:</p>

<div class="wp_syntax"><div class="code"><pre class="html" style="font-family:monospace;">https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js</pre></div></div>

<p>The result is that using <strong>HTTPS references to Google’s CDN will result in tremendously under-optimized caching when used on regular HTTP pages</strong>. Though you must use secure reference on pages that are secure themselves, you should <em>avoid</em> HTTPS references on pages that don’t require them.</p>
<h3>A better solution</h3>
<p>It&#8217;s not exactly light reading, but <a href="http://tools.ietf.org/html/rfc3986#section-4.2" target="_blank" rel="nofollow">section 4.2 of RFC 3986</a> provides for fully qualified URLs that omit protocol (the HTTP or HTTPS) altogether. When a URL’s protocol is omitted, the browser uses the underlying document&#8217;s protocol instead. </p>
<p>Put simply, these &#8220;protocol-less&#8221; URLs allow a reference like this to work in every browser you&#8217;ll try it in:</p>

<div class="wp_syntax"><div class="code"><pre class="html" style="font-family:monospace;">//ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js</pre></div></div>

<p>It looks strange at first, but <strong>this &#8220;protocol-less&#8221; URL is the best way to reference third party content that&#8217;s available via both HTTP and HTTPS</strong>.</p>
<p>On a page loaded through regular, unencrypted HTTP, script references using that URL will be loaded via HTTP and be cached as normal. Likewise, on a secure page that was loaded via HTTPS, script references targeting that protocol-less URL will automatically load the script from Google&#8217;s CDN via HTTPS and avoid the mixed content warning.</p>
<p>Thus, <strong>using the protocol-less URL allows a single script reference to adapt itself to what&#8217;s most optimal</strong>: HTTP and it&#8217;s full caching support on HTTP pages, and HTTPS on secured pages so that your users aren&#8217;t confronted with a mixed content warning.</p>
<h3>Conclusion</h3>
<p>I probably could have boiled this post down to a couple of sentences, but I hope you found the underlying “why” useful. Just saying that SSL resources aren’t cached isn’t nearly as interesting as understanding why, and how that relates to the mixed content issue.</p>
<p>Perhaps a big part of the problem is that <a href="http://code.google.com/apis/libraries/devguide.html#jquery" target="_blank">the Google AJAX Libraries developer guide</a> was recently updated to list only HTTPS URLs. Anyone who copy/pastes one of those URLs into their script reference without knowing better will be impacted by the loss of disk caching and cross-site caching, which is unfortunate. If anyone reading this has the right contacts, <strong>it would be great if that page could be updated to display the protocol-less URL for all of those libraries instead</strong>.</p>
<p>I hope if you see someone using a fixed HTTPS reference to a resource like jQuery on the Google CDN, you’ll point them here and hopefully help speed up the web just a tiny bit for everyone.</p>


<p>Related posts:<ol><li><a href='http://encosia.com/2008/12/10/3-reasons-why-you-should-let-google-host-jquery-for-you/' rel='bookmark' title='Permanent Link: 3 reasons why you should let Google host jQuery for you'>3 reasons why you should let Google host jQuery for you</a></li>
<li><a href='http://encosia.com/2010/09/15/6953-reasons-why-i-still-let-google-host-jquery-for-me/' rel='bookmark' title='Permanent Link: 6,953 reasons why I still let Google host jQuery for me'>6,953 reasons why I still let Google host jQuery for me</a></li>
<li><a href='http://encosia.com/2010/08/18/dont-let-jquerys-document-ready-slow-you-down/' rel='bookmark' title='Permanent Link: Don&#8217;t let jQuery&#8217;s $(document).ready() slow you down'>Don&#8217;t let jQuery&#8217;s $(document).ready() slow you down</a></li>
</ol></p><hr />

<p>You've been reading <a href="http://encosia.com/2011/01/19/cripple-the-google-cdns-caching-with-a-single-character/">Cripple the Google CDN&#8217;s caching with a single character</a>, originally posted at <a href="http://encosia.com">Encosia</a>.  I hope you enjoyed it, and thanks for reading.</p>

<p>If you've got any feedback, please click through and leave a comment; I'd love to hear from you. You can <a href="http://encosia.com/2011/01/19/cripple-the-google-cdns-caching-with-a-single-character/#post-commentblock">click here to jump directly to the comment section of this post</a>.</p><div class="feedflare">
<a href="http://feeds.encosia.com/~ff/Encosia?a=1E9Vjb9PqpE:pNQ-GkKWS0c:D7DqB2pKExk"><img src="http://feeds.feedburner.com/~ff/Encosia?i=1E9Vjb9PqpE:pNQ-GkKWS0c:D7DqB2pKExk" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=1E9Vjb9PqpE:pNQ-GkKWS0c:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=1E9Vjb9PqpE:pNQ-GkKWS0c:aWKiLpGymzw"><img src="http://feeds.feedburner.com/~ff/Encosia?d=aWKiLpGymzw" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=1E9Vjb9PqpE:pNQ-GkKWS0c:30RXbuXOgYA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=30RXbuXOgYA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=1E9Vjb9PqpE:pNQ-GkKWS0c:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Encosia?i=1E9Vjb9PqpE:pNQ-GkKWS0c:F7zBnMyn0Lo" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=1E9Vjb9PqpE:pNQ-GkKWS0c:gIN9vFwOqvQ"><img src="http://feeds.feedburner.com/~ff/Encosia?i=1E9Vjb9PqpE:pNQ-GkKWS0c:gIN9vFwOqvQ" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Encosia/~4/1E9Vjb9PqpE" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:91:"http://encosia.com/2011/01/19/cripple-the-google-cdns-caching-with-a-single-character/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"41";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:86:"http://encosia.com/2011/01/19/cripple-the-google-cdns-caching-with-a-single-character/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:8;a:6:{s:4:"data";s:41:"
		
		
		
		
		
				

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:40:"4 years of Encosia, and the best of 2010";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:51:"http://feeds.encosia.com/~r/Encosia/~3/lohcFp3eOp4/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:79:"http://encosia.com/2010/12/22/4-years-of-encosia-and-the-best-of-2010/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Wed, 22 Dec 2010 07:21:05 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:1:{i:0;a:5:{s:4:"data";s:7:"General";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:26:"http://encosia.com/?p=1079";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:1031:"It&#8217;s December 21st as I write this, which means it&#8217;s time for my yearly recap and a recounting of this year&#8217;s most popular posts. The way 2010 began, it threatened to be a tough fourth year of Encosia, but has eventually turned out to be a great year in the end. Encosia-related metrics are up [...]


Related posts:<ol><li><a href='http://encosia.com/2009/12/21/3-years-of-encosia-the-best-of-2009-and-my-gratitude/' rel='bookmark' title='Permanent Link: 3 years of Encosia, the best of 2009, and my gratitude'>3 years of Encosia, the best of 2009, and my gratitude</a></li>
<li><a href='http://encosia.com/2010/12/07/announcing-the-2010-encosia-holiday-giveaway/' rel='bookmark' title='Permanent Link: Announcing the 2010 Encosia Holiday Giveaway'>Announcing the 2010 Encosia Holiday Giveaway</a></li>
<li><a href='http://encosia.com/2010/12/13/2010-holiday-contest-results/' rel='bookmark' title='Permanent Link: The 2010 Encosia Holiday Contest Results'>The 2010 Encosia Holiday Contest Results</a></li>
</ol>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:9:"Dave Ward";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:10428:"<p>It&#8217;s December 21st as I write this, which means it&#8217;s time for my yearly recap and a recounting of this year&#8217;s most popular posts. The way 2010 began, it threatened to be a tough fourth year of Encosia, but has eventually turned out to be a great year in the end.</p>
<p>Encosia-related metrics are up across the board, from page views, to RSS subscribers, to Twitter followers. In fact, the site has served right at <strong>one and a quarter million page views</strong> to JavaScript-enabled, human visitors in the past year. That’s chump change for a lot of larger sites, but it’s a number that’s truly hard for me to fathom in the context of my paltry trickle of niche content.</p>
<p>The year wasn&#8217;t all smooth sailing though&#8230;</p>
<h3>Microsoft zigged; we did not zag</h3>
<p>During the latter half of 2009 and the beginning of 2010, Alessandro, David, and myself were working furiously on finishing <a href="http://encosia.com/2009/08/05/get-early-access-to-asp-net-ajax-in-action-second-edition/" target="_blank">the second edition of ASP.NET AJAX in Action</a>. The wide range of new features in the ASP.NET Ajax Library made that a non-trivial task, and we wanted to do a good job. There were several chapters of entirely brand new material and others that needed far-reaching updates to bring current.</p>
<p>However, the entire endeavor was derailed when we learned that the ASP.NET Ajax Library was to be suddenly abandoned before it ever officially saw daylight. That was a surprising turn of events for a project that had been under ongoing development for nearly two years.</p>
<p>Rather than release a mediocre revision that only covered the minor updates that ASP.NET AJAX itself has seen, we decided the right thing to do was to cancel the second edition and refund pre-orders. As painful as it was to abandon months of work, I do believe that Microsoft’s choice to fully embrace jQuery is a positive long-term development for the ASP.NET platform. I’m genuinely more optimistic than ever about the future of the symbiotic relationship between Microsoft and jQuery.</p>
<p>Ultimately, all’s well that ends well, and we’re working to make this end well. We’ve been regrouping, refocusing, and I expect to have a related announcement soon.</p>
<h3>Doing more and ending up with less</h3>
<p>I&#8217;ve had a lot of off-site content creation to juggle during the last year, ranging from the doomed book, to recording <a href="http://tekpub.com/productions/jquery" target="_blank">a dozen TekPub episodes</a>, to writing for sites like ASP.NET, <a href="http://visitmix.com/" target="_blank">MIX Online</a>, and <a href="http://msdn.microsoft.com/en-us/scriptjunkie/" target="_blank">Script Junkie</a>. That left me with frustratingly scarce time to write articles here for my own site. I’ve managed a respectable two-post-per-month average, but I hoped for more. With such a low volume of posts, I feel fortunate to have seen several reach the front page of Hacker News this year.</p>
<p>Next year, I intend to retreat from the off-site writing a bit, and find more time to focus on writing here. I&#8217;ve had post ideas bouncing around my head, for years in some cases, that I very much want to get fleshed out and published.</p>
<h3>The Best of 2010</h3>
<p>&#8220;Best&#8221; is a subjective term, but the following are the five most trafficked posts published here this year, beginning with the highest traffic and descending.</p>
<p><a href="http://encosia.com/2010/08/18/dont-let-jquerys-document-ready-slow-you-down/">Don&#8217;t let jQuery&#8217;s $(document).ready() slow you down</a> – I wrote this post quickly one morning, based on <a href="http://elijahmanor.com/" target="_blank">Elijah Manor</a> asking me to expand on a point I made on Twitter. I wasn&#8217;t sure if this post was worth writing at all, but it seems to have been useful to more people than I expected.</p>
<p>It even ended up being republished in <a href="http://hackermonthly.com/issue-5.html" target="_blank">issue #5 of Hacker Monthly</a>, which I certainly didn&#8217;t expect.</p>
<p><a href="http://encosia.com/2010/09/15/6953-reasons-why-i-still-let-google-host-jquery-for-me/">6,953 reasons why I still let Google host jQuery for me</a> &#8211; I put a lot of work into this one. The post itself took long enough to write, but the two rounds of underlying research took even longer. I think it was worth the work though; it seems to have helped raise awareness about just how prevalent the Google CDN is used on the most trafficked sites and the importance of using a common URL to optimize for the cross-site caching benefit. In fact, the jQuery.com site&#8217;s CDN reference finally got updated to a version-specific one as a direct result of the post.</p>
<p><a href="http://encosia.com/2010/04/23/how-30-seconds-dropped-my-bounce-rate-by-78/">How 30 seconds dropped my bounce rate by 78%</a> &#8211; This post was way off topic, but I thought it might be interesting enough to be worthwhile. So many sites only have one form of analytics, most of which calculate bounce rates based on multiple page views, I&#8217;m sure I wasn&#8217;t alone in being unhappy with my seemingly high bounce rate. Knowing that most people are actually sticking around and spending several minutes on average is a relief. All the traffic in the world is meaningless to me if I&#8217;m not actually getting useful information to people who need it.</p>
<p><a href="http://encosia.com/2010/03/03/asmx-and-json-common-mistakes-and-misconceptions/">ASMX and JSON &#8211; Common mistakes and misconceptions</a> – I began this series after someone mentioned that they were struggling with WCF instead of using ASMX, because they wanted to use JSON instead of XML and SOAP. WCF is good for some things, but ASMX is so much simpler when all you need is a JSON endpoint, plus JavaScriptSerializer is more flexible than DataContractJsonSerializer. I can’t imagine why anyone would waste their time with WCF for some of these tasks just because they feel that they’re supposed to.</p>
<p>I have several more posts in mind for this series. Should I publish them?</p>
<p><a href="http://encosia.com/2010/03/30/5-steps-toward-jquery-mastery/">5 Steps Toward jQuery Mastery</a> – This was a fun one. My friend <a href="http://mosesofegypt.net/" target="_blank">Moses</a> (of Egypt) asked me to write a piece for .Network magazine’s inaugural print issue. Since it turned out pretty well and there was no corresponding online version of that issue, we decided it made sense for me to publish it here also. It went on to be the fifth most viewed post published this year; thanks, Moses!</p>
<h3>An unknown quantity</h3>
<p>One popular article this year that I’m unsure of is the article I wrote for MIX Online: <a href="http://visitmix.com/Articles/Javascript-Libraries-and-ASPNET" target="_blank">JavaScript Libraries and ASP.NET: A Guide to jQuery, AJAX and Microsoft</a>. That article was a work in progress for most of 2010, maturing from a simple follow-on to my previous jQuery article there until it became what was ultimately published. I was happy with how it finally turned out, and grateful to <a href="http://visitmix.com/About/karstenj" target="_blank">Karsten</a> for being infinitely patient with me as the article grew and evolved.</p>
<p>Since I don’t have access to statistics about its popularity, I can’t be sure, but other signs point to it deserving a mention in this post.</p>
<h3>Thanks</h3>
<p>As always, I want to express my gratitude for your attention, support, and for sharing my work with others. As much as I&#8217;d like to say that I&#8217;d be just as motivated to keep doing this in a vacuum, that simply isn&#8217;t true. You make this worthwhile to me.</p>
<p>Thanks.</p>
<p>I hope you all have a safe and happy holiday season, and a great new year.</p>


<p>Related posts:<ol><li><a href='http://encosia.com/2009/12/21/3-years-of-encosia-the-best-of-2009-and-my-gratitude/' rel='bookmark' title='Permanent Link: 3 years of Encosia, the best of 2009, and my gratitude'>3 years of Encosia, the best of 2009, and my gratitude</a></li>
<li><a href='http://encosia.com/2010/12/07/announcing-the-2010-encosia-holiday-giveaway/' rel='bookmark' title='Permanent Link: Announcing the 2010 Encosia Holiday Giveaway'>Announcing the 2010 Encosia Holiday Giveaway</a></li>
<li><a href='http://encosia.com/2010/12/13/2010-holiday-contest-results/' rel='bookmark' title='Permanent Link: The 2010 Encosia Holiday Contest Results'>The 2010 Encosia Holiday Contest Results</a></li>
</ol></p><hr />

<p>You've been reading <a href="http://encosia.com/2010/12/22/4-years-of-encosia-and-the-best-of-2010/">4 years of Encosia, and the best of 2010</a>, originally posted at <a href="http://encosia.com">Encosia</a>.  I hope you enjoyed it, and thanks for reading.</p>

<p>If you've got any feedback, please click through and leave a comment; I'd love to hear from you. You can <a href="http://encosia.com/2010/12/22/4-years-of-encosia-and-the-best-of-2010/#post-commentblock">click here to jump directly to the comment section of this post</a>.</p><div class="feedflare">
<a href="http://feeds.encosia.com/~ff/Encosia?a=lohcFp3eOp4:tYEIc2z-qY4:D7DqB2pKExk"><img src="http://feeds.feedburner.com/~ff/Encosia?i=lohcFp3eOp4:tYEIc2z-qY4:D7DqB2pKExk" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=lohcFp3eOp4:tYEIc2z-qY4:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=lohcFp3eOp4:tYEIc2z-qY4:aWKiLpGymzw"><img src="http://feeds.feedburner.com/~ff/Encosia?d=aWKiLpGymzw" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=lohcFp3eOp4:tYEIc2z-qY4:30RXbuXOgYA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=30RXbuXOgYA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=lohcFp3eOp4:tYEIc2z-qY4:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Encosia?i=lohcFp3eOp4:tYEIc2z-qY4:F7zBnMyn0Lo" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=lohcFp3eOp4:tYEIc2z-qY4:gIN9vFwOqvQ"><img src="http://feeds.feedburner.com/~ff/Encosia?i=lohcFp3eOp4:tYEIc2z-qY4:gIN9vFwOqvQ" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Encosia/~4/lohcFp3eOp4" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:75:"http://encosia.com/2010/12/22/4-years-of-encosia-and-the-best-of-2010/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:1:"4";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:70:"http://encosia.com/2010/12/22/4-years-of-encosia-and-the-best-of-2010/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:9;a:6:{s:4:"data";s:41:"
		
		
		
		
		
				

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:40:"The 2010 Encosia Holiday Contest Results";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:51:"http://feeds.encosia.com/~r/Encosia/~3/OWvoATJLXCQ/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:68:"http://encosia.com/2010/12/13/2010-holiday-contest-results/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Tue, 14 Dec 2010 01:39:53 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:1:{i:0;a:5:{s:4:"data";s:7:"General";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:26:"http://encosia.com/?p=1076";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:1097:"526 entries later, it&#8217;s time to announce the winners of the 2010 Encosia Holiday Giveaway. Without further ado: One free month at TekPub: afasyah, tdryan, and Zoran (Comment). One free year at TekPub: James Sheldon (TekPub Voting). Visual Studio 2010 Ultimate with MSDN: Richard Kimber (Comment). Congratulations! I&#8217;m contacting each of you right now via [...]


Related posts:<ol><li><a href='http://encosia.com/2010/12/07/announcing-the-2010-encosia-holiday-giveaway/' rel='bookmark' title='Permanent Link: Announcing the 2010 Encosia Holiday Giveaway'>Announcing the 2010 Encosia Holiday Giveaway</a></li>
<li><a href='http://encosia.com/2010/12/22/4-years-of-encosia-and-the-best-of-2010/' rel='bookmark' title='Permanent Link: 4 years of Encosia, and the best of 2010'>4 years of Encosia, and the best of 2010</a></li>
<li><a href='http://encosia.com/2009/12/21/3-years-of-encosia-the-best-of-2009-and-my-gratitude/' rel='bookmark' title='Permanent Link: 3 years of Encosia, the best of 2009, and my gratitude'>3 years of Encosia, the best of 2009, and my gratitude</a></li>
</ol>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:9:"Dave Ward";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:4350:"<p>526 entries later, it&#8217;s time to announce the winners of <a href="http://encosia.com/2010/12/07/announcing-the-2010-encosia-holiday-giveaway/">the 2010 Encosia Holiday Giveaway</a>.  Without further ado:</p>
<ul>
<li>One free month at TekPub: <a href="http://twitter.com/#!/afasyah/status/12794323284262912" target="_blank" rel="nofollow">afasyah</a>, <a href="http://twitter.com/#!/tdryan/status/13302205553573888" target="_blank" rel="nofollow">tdryan</a>, and <a href="http://www.elveneleven.com/" target="_blank">Zoran</a> (<a href="http://encosia.com/2010/12/07/announcing-the-2010-encosia-holiday-giveaway/#comment-40946" target="_blank">Comment</a>).</li>
<li>One free year at TekPub: James Sheldon (TekPub Voting).</li>
<li>Visual Studio 2010 Ultimate with MSDN: <a href="http://blog.dogma.co.uk" target="_blank">Richard Kimber</a> (<a href="http://encosia.com/2010/12/07/announcing-the-2010-encosia-holiday-giveaway/#comment-40881" target="_blank">Comment</a>).</li>
</ul>
<p><strong>Congratulations!</strong> I&#8217;m contacting each of you right now via email or Twitter to get your prizes to you. If you haven&#8217;t received anything from me in the next 24 hours, please <a href="http://encosia.com/contact/">get in touch with me directly</a> to be sure my attempt wasn&#8217;t marked as spam or otherwise thwarted.</p>
<p>I want to thank my friends James and Rob at <a href="http://tekpub.com/" target="_blank">TekPub</a> for providing the TekPub memberships, and of course Microsoft for providing the MSDN subscription.</p>
<p>Finally, I want to thank <strong>everyone</strong> for participating.  The topic suggestions, both in comments and the TekPub voting area have been even higher quality than I had expected.  You can be sure that your feedback will influence what you read here and see at TekPub over the course of the next year.</p>


<p>Related posts:<ol><li><a href='http://encosia.com/2010/12/07/announcing-the-2010-encosia-holiday-giveaway/' rel='bookmark' title='Permanent Link: Announcing the 2010 Encosia Holiday Giveaway'>Announcing the 2010 Encosia Holiday Giveaway</a></li>
<li><a href='http://encosia.com/2010/12/22/4-years-of-encosia-and-the-best-of-2010/' rel='bookmark' title='Permanent Link: 4 years of Encosia, and the best of 2010'>4 years of Encosia, and the best of 2010</a></li>
<li><a href='http://encosia.com/2009/12/21/3-years-of-encosia-the-best-of-2009-and-my-gratitude/' rel='bookmark' title='Permanent Link: 3 years of Encosia, the best of 2009, and my gratitude'>3 years of Encosia, the best of 2009, and my gratitude</a></li>
</ol></p><hr />

<p>You've been reading <a href="http://encosia.com/2010/12/13/2010-holiday-contest-results/">The 2010 Encosia Holiday Contest Results</a>, originally posted at <a href="http://encosia.com">Encosia</a>.  I hope you enjoyed it, and thanks for reading.</p>

<p>If you've got any feedback, please click through and leave a comment; I'd love to hear from you. You can <a href="http://encosia.com/2010/12/13/2010-holiday-contest-results/#post-commentblock">click here to jump directly to the comment section of this post</a>.</p><div class="feedflare">
<a href="http://feeds.encosia.com/~ff/Encosia?a=OWvoATJLXCQ:O4SIwViRt7c:D7DqB2pKExk"><img src="http://feeds.feedburner.com/~ff/Encosia?i=OWvoATJLXCQ:O4SIwViRt7c:D7DqB2pKExk" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=OWvoATJLXCQ:O4SIwViRt7c:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=OWvoATJLXCQ:O4SIwViRt7c:aWKiLpGymzw"><img src="http://feeds.feedburner.com/~ff/Encosia?d=aWKiLpGymzw" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=OWvoATJLXCQ:O4SIwViRt7c:30RXbuXOgYA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=30RXbuXOgYA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=OWvoATJLXCQ:O4SIwViRt7c:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Encosia?i=OWvoATJLXCQ:O4SIwViRt7c:F7zBnMyn0Lo" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=OWvoATJLXCQ:O4SIwViRt7c:gIN9vFwOqvQ"><img src="http://feeds.feedburner.com/~ff/Encosia?i=OWvoATJLXCQ:O4SIwViRt7c:gIN9vFwOqvQ" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Encosia/~4/OWvoATJLXCQ" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:64:"http://encosia.com/2010/12/13/2010-holiday-contest-results/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:1:"1";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:59:"http://encosia.com/2010/12/13/2010-holiday-contest-results/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:10;a:6:{s:4:"data";s:41:"
		
		
		
		
		
				

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:44:"Announcing the 2010 Encosia Holiday Giveaway";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:51:"http://feeds.encosia.com/~r/Encosia/~3/rf2xh5ktFVA/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:84:"http://encosia.com/2010/12/07/announcing-the-2010-encosia-holiday-giveaway/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Tue, 07 Dec 2010 08:42:02 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:1:{i:0;a:5:{s:4:"data";s:7:"General";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:26:"http://encosia.com/?p=1071";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:996:"Each year around the 21st of December, I&#8217;ve ended the year with a brief recap and a list of the year&#8217;s most popular posts. That has worked well in the past, but this year I find myself in the position to give more than just information back to the community. So, as I close in [...]


Related posts:<ol><li><a href='http://encosia.com/2010/12/13/2010-holiday-contest-results/' rel='bookmark' title='Permanent Link: The 2010 Encosia Holiday Contest Results'>The 2010 Encosia Holiday Contest Results</a></li>
<li><a href='http://encosia.com/2010/05/17/im-giving-away-10-free-months-of-tekpub-this-week/' rel='bookmark' title='Permanent Link: I&#8217;m giving away 10 free months of TekPub this week'>I&#8217;m giving away 10 free months of TekPub this week</a></li>
<li><a href='http://encosia.com/2010/12/22/4-years-of-encosia-and-the-best-of-2010/' rel='bookmark' title='Permanent Link: 4 years of Encosia, and the best of 2010'>4 years of Encosia, and the best of 2010</a></li>
</ol>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:9:"Dave Ward";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:7030:"<p>Each year around the 21st of December, I&#8217;ve ended the year with a brief recap and a list of the year&#8217;s most popular posts. That has worked well in the past, but this year I find myself in the position to give more than just information back to the community. So, as I close in on my fourth full year here at Encosia, I&#8217;m going to try something a bit different this time around.</p>
<p>This year, I&#8217;m going to precede that yearly recap giving away some great prizes, including a full free year at <a href="http://tekpub.com/" target="_blank">TekPub</a> and <a href="http://www.microsoft.com/visualstudio/en-us/products/2010-editions/ultimate" rel="nofollow" target="_blank">Visual Studio 2010 Ultimate with a year-long subscription to the MSDN library</a>.</p>
<p>Additionally, I know that many of you will already be spending time offline with your friends and family by the 21st of December. So, I&#8217;m also going to move things up a bit this year to make sure that everyone&#8217;s able to participate.</p>
<h3>What you can win</h3>
<p><strong>One month membership to TekPub</strong> (x3) &#8211; Three promo codes, each redeemable for one free month of membership at TekPub. As a monthly member, you can access any video on the site during your membership, including episodes of my series: <a href="http://tekpub.com/productions/jquery" target="_blank">Mastering jQuery</a> and <a href="http://tekpub.com/productions/askdaveward" target="_blank">Ask the Expert: Dave Ward</a>.</p>
<p><strong>One year membership to TekPub</strong> &#8211; A promo code redeemable for an entire year of free membership at TekPub. As a yearly member, not only will you have access to every video on the site for a full year, but you will also have the ability to download any of those videos for offline viewing.</p>
<p><strong>Visual Studio 2010 Ultimate with one year of MSDN</strong> &#8211; A promo code redeemable for one year&#8217;s subscriber access to MSDN, in addition to the top-tier version of Visual Studio. The MSDN subscriber area gives you access to every piece of software that Microsoft sells, including Windows, Office, and SQL Server &#8211; a truly unparalleled toolbox for anyone who wants to develop on Microsoft&#8217;s platforms.</p>
<h3>How to win</h3>
<p>There are four ways to enter the drawing. You can choose just one of them if you like, any combination of them, or all four for the best chance to win:</p>
<p><strong>Twitter</strong> &#8211; The easiest way to enter is to post this message on Twitter:</p>
<blockquote><p>I just entered to win VS2010 Ultimate with MSDN or up to a year of free TekPub membership. You can too: http://encosia.com/1071</p></blockquote>
<p><a href="http://twitter.com/home?status=I%20just%20entered%20to%20win%20VS2010%20Ultimate%20with%20MSDN%20or%20up%20to%20a%20year%20of%20free%20TekPub%20membership.%20You%20can%20too%3A%20http%3A%2F%2Fencosia.com%2F1071" rel="nofollow" target="_blank">Click here to open Twitter in a new window, with the message pre-filled.</a></p>
<p><strong>Comment</strong> &#8211; I&#8217;m always eager to hear your feedback. Leave a comment on this post with suggestions for what you&#8217;d like to see me write about next year or which post(s) here in the past you found the most helpful.</p>
<p><strong>Suggest a video topic</strong> &#8211; I&#8217;ve been happy with the first four episodes that we&#8217;ve recorded for my new &#8220;Ask the Expert&#8221; series on TekPub. It&#8217;s ongoing success depends on your questions though. Anyone who <a href="http://vote.tekpub.com/forums/73709-ask-the-expert-dave-ward" target="_blank" rel="nofollow">suggests a topic for the series</a> gets one entry into this contest.</p>
<p>As an added bonus, unrelated to this contest, you&#8217;ll get free access to the entire series if we use your suggestion to record an episode.</p>
<p><strong>Vote on video topics</strong> &#8211; Vote on the topic suggestions that you find most interesting. <a href="http://vote.tekpub.com/forums/73709-ask-the-expert-dave-ward" target="_blank" rel="nofollow">Voting on any of them</a> is good for another entry.</p>
<h3>Schedule</h3>
<p>The contest is open to entires until 10pm Eastern time (GMT -5) on this Friday, December 10th.</p>
<p>Entires will be tabulated and the five winners chosen at random, via <a href="http://random.org" target="_blank" rel="nofollow">random.org</a>. The results will be posted here on the following Monday (December 13th).</p>
<p><strong>Good luck!</strong></p>


<p>Related posts:<ol><li><a href='http://encosia.com/2010/12/13/2010-holiday-contest-results/' rel='bookmark' title='Permanent Link: The 2010 Encosia Holiday Contest Results'>The 2010 Encosia Holiday Contest Results</a></li>
<li><a href='http://encosia.com/2010/05/17/im-giving-away-10-free-months-of-tekpub-this-week/' rel='bookmark' title='Permanent Link: I&#8217;m giving away 10 free months of TekPub this week'>I&#8217;m giving away 10 free months of TekPub this week</a></li>
<li><a href='http://encosia.com/2010/12/22/4-years-of-encosia-and-the-best-of-2010/' rel='bookmark' title='Permanent Link: 4 years of Encosia, and the best of 2010'>4 years of Encosia, and the best of 2010</a></li>
</ol></p><hr />

<p>You've been reading <a href="http://encosia.com/2010/12/07/announcing-the-2010-encosia-holiday-giveaway/">Announcing the 2010 Encosia Holiday Giveaway</a>, originally posted at <a href="http://encosia.com">Encosia</a>.  I hope you enjoyed it, and thanks for reading.</p>

<p>If you've got any feedback, please click through and leave a comment; I'd love to hear from you. You can <a href="http://encosia.com/2010/12/07/announcing-the-2010-encosia-holiday-giveaway/#post-commentblock">click here to jump directly to the comment section of this post</a>.</p><div class="feedflare">
<a href="http://feeds.encosia.com/~ff/Encosia?a=rf2xh5ktFVA:JkJbyLDRjiw:D7DqB2pKExk"><img src="http://feeds.feedburner.com/~ff/Encosia?i=rf2xh5ktFVA:JkJbyLDRjiw:D7DqB2pKExk" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=rf2xh5ktFVA:JkJbyLDRjiw:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=rf2xh5ktFVA:JkJbyLDRjiw:aWKiLpGymzw"><img src="http://feeds.feedburner.com/~ff/Encosia?d=aWKiLpGymzw" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=rf2xh5ktFVA:JkJbyLDRjiw:30RXbuXOgYA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=30RXbuXOgYA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=rf2xh5ktFVA:JkJbyLDRjiw:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Encosia?i=rf2xh5ktFVA:JkJbyLDRjiw:F7zBnMyn0Lo" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=rf2xh5ktFVA:JkJbyLDRjiw:gIN9vFwOqvQ"><img src="http://feeds.feedburner.com/~ff/Encosia?i=rf2xh5ktFVA:JkJbyLDRjiw:gIN9vFwOqvQ" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Encosia/~4/rf2xh5ktFVA" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:80:"http://encosia.com/2010/12/07/announcing-the-2010-encosia-holiday-giveaway/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"44";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:75:"http://encosia.com/2010/12/07/announcing-the-2010-encosia-holiday-giveaway/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:11;a:6:{s:4:"data";s:47:"
		
		
		
		
		
				
		
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:57:"jQuery Templates, composite rendering, and remote loading";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:51:"http://feeds.encosia.com/~r/Encosia/~3/N77XcSmNAmY/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:95:"http://encosia.com/2010/12/02/jquery-templates-composite-rendering-and-remote-loading/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Thu, 02 Dec 2010 18:40:27 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:3:{i:0;a:5:{s:4:"data";s:10:"JavaScript";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:2:"UI";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:26:"http://encosia.com/?p=1069";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:1086:"In my last post about jQuery Templates, I showed you how to use template composition to build a template out of simple sub-templates. These composite templates are a great way to address the complexity that creeps into real-world UIs, as they inevitably grow and become more intricate. However, one feature missing from my last example [...]


Related posts:<ol><li><a href='http://encosia.com/2010/10/05/using-external-templates-with-jquery-templates/' rel='bookmark' title='Permanent Link: Using external templates with jQuery Templates'>Using external templates with jQuery Templates</a></li>
<li><a href='http://encosia.com/2010/11/10/composition-with-jquery-templates-why-and-how/' rel='bookmark' title='Permanent Link: Composition with jQuery Templates: Why and How'>Composition with jQuery Templates: Why and How</a></li>
<li><a href='http://encosia.com/2010/05/03/a-few-thoughts-on-jquery-templating-with-jquery-tmpl/' rel='bookmark' title='Permanent Link: A few thoughts on jQuery templating with jQuery.tmpl'>A few thoughts on jQuery templating with jQuery.tmpl</a></li>
</ol>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:9:"Dave Ward";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:26983:"<p>In my last post about jQuery Templates, I showed you how to use template composition to build a template out of simple sub-templates. These composite templates are a great way to address the complexity that creeps into real-world UIs, as they inevitably grow and become more intricate. However, <strong>one feature missing from my last example was the ability to store those composite templates in external files and load them asynchronously for rendering</strong>.</p>
<p>I&#8217;ve described how to accomplish that with single templates in the past, using jQuery&#8217;s AJAX utilities and a particular usage of <code>tmpl()</code>. Unfortunately, remotely loading a group of composite templates from a single file is not quite as simple, and the technique I&#8217;ve described previously will not work.</p>
<p>Not to worry though, it&#8217;s still relatively easy.</p>
<p>In this post, I&#8217;ll show you how to move a group of composite templates to an external file, how to load and render them with jQuery Templates, and how to take advantage of an expected benefit to improve separation of concerns.</p>
<p><strong>Caution:</strong> <em>If you haven&#8217;t read my previous posts about <a href="http://encosia.com/2010/10/05/using-external-templates-with-jquery-templates/" target="_blank">remotely loading jQuery Templates definitions</a> and <a href="http://encosia.com/2010/11/10/composition-with-jquery-templates-why-and-how/" target="_blank">using {{tmpl}} to achieve template composition</a>, read them before continuing with this post.  I&#8217;m not going to cover that material again here, and this may not make much sense without those prerequisites.</em></p>
<h3>Moving the templates to an external file</h3>
<p>Breaking the invoice template apart helped make it more approachable and maintainable, but I don&#8217;t like leaving the template embedded in the page&#8217;s markup. The larger a single file becomes, the more difficult it is to understand and work with &#8211; especially over time.</p>
<p>Disentangling chunks of the presentation tier and moving them to separate files is a great way to attack the problem of bloated pages and views. We&#8217;ve been doing that since the beginning of the web, from seemingly-ancient techniques like <a href="http://en.wikipedia.org/wiki/Server_Side_Includes" rel="nofollow" target="_blank">SSI includes</a>, to file includes in scripting frameworks like ASP and PHP, to partial views in MVC frameworks. So, why stop now just because the templates are rendered in the browser?</p>
<p>Moving the previous example&#8217;s template definitions to a separate file is as simple as it sounds. Just take the invoice template and both its row templates, script wrappers included, and move them into a new file of your choosing. I&#8217;m going to move them to a file named <strong>_invoice.tmpl.htm</strong>:</p>

<div class="wp_syntax"><div class="code"><pre class="html" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #060; font-style: italic;">&lt;!-- Tip: It's safe to use HTML comments in the file --&gt;</span></span>
&nbsp;
<span style="color: #009900;"><span style="color: #060; font-style: italic;">&lt;!-- Invoice container template --&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;script</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;invoiceTemplate&quot;</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;x-jquery-tmpl&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;table</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;invoice&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  {{each lineItems}}
    {{tmpl($value) get_invoiceRowTemplateName(type)}}
  {{/each}}
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/table&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/script&gt;</span></span>
&nbsp;
<span style="color: #009900;"><span style="color: #060; font-style: italic;">&lt;!-- Invoice row templates --&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;script</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;serviceRowTemplate&quot;</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;x-jquery-tmpl&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tr</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;service&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td</span> <span style="color: #000066;">colspan</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;2&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>${service}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td</span> <span style="color: #000066;">colspan</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;2&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>${price}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tr&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/script&gt;</span></span>
&nbsp;
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;script</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;itemRowTemplate&quot;</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;x-jquery-tmpl&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tr</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;item&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>${item}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>${description}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>${price}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>${qty}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tr&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/script&gt;</span></span></pre></div></div>

<h3>Naming the template file</h3>
<p>If you&#8217;re wondering why I chose that somewhat convoluted filename for the template, I&#8217;ll explain:</p>
<p>Ideally, I would like to call the template something like invoiceTemplate.tmpl, but most popular web servers refuse to serve files with non-standard extensions by default. You can circumvent that with a bit of manual configuration, but it&#8217;s not worth the unending hassle of extra configuration work on every server and/or site where you use this technique. So, .tmpl is out.</p>
<p>I really liked <a href="http://encosia.com/2010/10/05/using-external-templates-with-jquery-templates/#comment-40029">Nathan Smith&#8217;s suggestion for a naming compromise</a> on my previous post about remote loading, which boils down to this:</p>
<ul>
<li>Prefix the filename with an underscore. This denotes a partial view in many modern view engines and is a useful convention for indicating that the file is not a valid/complete HTML document.</li>
<li>Nathan suggested following _templateName with .tpl, to indicate that it&#8217;s a template. I&#8217;m going to tweak that slightly and use .tmpl, so it&#8217;s more clear that the template is intended for use with jQuery Templates.</li>
<li>The file should end in .htm, to be sure the file will be readily served up under almost any web server&#8217;s default configuration. Using .htm or another text/html extension also improves the odds that the template definitions will be served with appropriate compression and caching.</li>
</ul>
<p>The first two are just suggestions, of course. You can use any arbitrary naming scheme you prefer and the approach described in this post will still work fine.</p>
<p><strong>I do recommend sticking with an .htm or .html extension though</strong>. I (stubbornly) went through the configuration hassle of using .tpl <a href="http://encosia.com/2008/06/26/use-jquery-and-aspnet-ajax-to-build-a-client-side-repeater/">when I was originally working with jTemplates&#8217; remote loading feature a couple years ago</a>, and eventually had to give up on it. The ongoing configuration hassles ultimately outweighed the benefit of a uniquely descriptive extension.</p>
<h3>Loading and rendering the template</h3>
<p>With the templates moved to an external file, we need a way to load and render them. As I mentioned earlier, the approach I&#8217;ve previously described for remote template loading isn&#8217;t viable in this scenario. Treating the external file as a simple template string only works if the file contains a <em>single</em> template definition and no extraneous markup. Our file fails on both counts.</p>
<p>Another disadvantage my previous approach is caching. When you render a string-based template, jQuery Templates doesn&#8217;t cache the compiled template. If you end up rendering the same template more than once per pageview, the string-based approach was slower than it could have been.</p>
<p>To solve both those issues, we can use jQuery to load the contents of the template file, inject all of it into the document, and then work with the templates as if they had been embedded in the page all along.</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #006600; font-style: italic;">// The invoice object to render (see previous post).</span>
<span style="color: #003366; font-weight: bold;">var</span> invoice <span style="color: #339933;">=</span> <span style="color: #009900;">&#123;</span>
  invoiceItems<span style="color: #339933;">:</span> <span style="color: #009900;">&#91;</span>
    <span style="color: #009900;">&#123;</span> type<span style="color: #339933;">:</span> <span style="color: #3366CC;">'item'</span><span style="color: #339933;">,</span> 
      part<span style="color: #339933;">:</span> <span style="color: #3366CC;">'99Designs'</span><span style="color: #339933;">,</span> description<span style="color: #339933;">:</span> <span style="color: #3366CC;">'99 Designs Logo'</span><span style="color: #339933;">,</span> 
      price<span style="color: #339933;">:</span> <span style="color: #CC0000;">450.00</span><span style="color: #339933;">,</span> qty<span style="color: #339933;">:</span> <span style="color: #CC0000;">1</span> <span style="color: #009900;">&#125;</span><span style="color: #339933;">,</span>
    <span style="color: #009900;">&#123;</span> type<span style="color: #339933;">:</span> <span style="color: #3366CC;">'service'</span><span style="color: #339933;">,</span>
      service<span style="color: #339933;">:</span> <span style="color: #3366CC;">'Web development and testing'</span><span style="color: #339933;">,</span> 
      price<span style="color: #339933;">:</span> <span style="color: #CC0000;">25000.00</span> <span style="color: #009900;">&#125;</span><span style="color: #339933;">,</span>
    <span style="color: #009900;">&#123;</span> type<span style="color: #339933;">:</span> <span style="color: #3366CC;">'item'</span><span style="color: #339933;">,</span>
      part<span style="color: #339933;">:</span> <span style="color: #3366CC;">'LinodeMonthly'</span><span style="color: #339933;">,</span> description<span style="color: #339933;">:</span> <span style="color: #3366CC;">'Monthly site hosting'</span><span style="color: #339933;">,</span> 
      price<span style="color: #339933;">:</span> <span style="color: #CC0000;">40.00</span><span style="color: #339933;">,</span> qty<span style="color: #339933;">:</span> <span style="color: #CC0000;">12</span> <span style="color: #009900;">&#125;</span>
  <span style="color: #009900;">&#93;</span>
<span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #006600; font-style: italic;">// Asynchronously load the template definition file.</span>
$.<span style="color: #660066;">get</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'_invoice.tmpl.htm'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>templates<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
  <span style="color: #006600; font-style: italic;">// Inject all those templates at the end of the document.</span>
  $<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'body'</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">append</span><span style="color: #009900;">&#40;</span>templates<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
  <span style="color: #006600; font-style: italic;">// Select the newly injected invoiceTemplate and use it</span>
  <span style="color: #006600; font-style: italic;">//  render the invoice data.</span>
  $<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'#invoiceTemplate'</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">tmpl</span><span style="color: #009900;">&#40;</span>invoice<span style="color: #009900;">&#41;</span>.<span style="color: #660066;">appendTo</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'body'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>Injecting the template definitions into the page&#8217;s markup allows you to render them with the same <code>$('#templateId').tmpl(data)</code> syntax that you&#8217;ve seen in most jQuery Templates examples.</p>
<h3>Bringing the row template resolver along for the ride</h3>
<p>One remaining annoyance is the now-orphaned row template name resolver, <code>get_invoiceRowTemplateName()</code> (covered in <a href="http://encosia.com/2010/11/10/composition-with-jquery-templates-why-and-how/">my composite template post</a>). Keeping that function with the rest of the page&#8217;s JavaScript does work, but I&#8217;m not happy with it. To get the full benefit of encapsulating the template in an external file, we should keep any dependent JavaScript code with the template itself.</p>
<p>That&#8217;s especially true if the template is used from more than one page.</p>
<p>As it turns out, accomplishing that is much easier than it may seem at first. All we need to do is move the resolver function right into _invoice.tmpl.htm:</p>

<div class="wp_syntax"><div class="code"><pre class="html" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #060; font-style: italic;">&lt;!-- Invoice container template --&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;script</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;invoiceTemplate&quot;</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;x-jquery-tmpl&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;table</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;invoice&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  {{each lineItems}}
    {{tmpl($value) get_invoiceRowTemplateName(type)}}
  {{/each}}
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/table&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/script&gt;</span></span>
&nbsp;
<span style="color: #009900;"><span style="color: #060; font-style: italic;">&lt;!-- Invoice row templates --&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;script</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;serviceRowTemplate&quot;</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;x-jquery-tmpl&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tr</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;service&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td</span> <span style="color: #000066;">colspan</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;2&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>${service}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td</span> <span style="color: #000066;">colspan</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;2&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>${price}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tr&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/script&gt;</span></span>
&nbsp;
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;script</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;itemRowTemplate&quot;</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;x-jquery-tmpl&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tr</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;item&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>${item}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>${description}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>${price}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>${qty}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tr&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/script&gt;</span></span>
&nbsp;
<span style="color: #009900;"><span style="color: #060; font-style: italic;">&lt;!-- This function is used by the invoice container to determine --&gt;</span></span>
<span style="color: #009900;"><span style="color: #060; font-style: italic;">&lt;!--  which row template to render for a given line item --&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;script</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;text/javascript&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  function get_invoiceRowTemplateName(type) {
    // Return a template selector that matches our 
    //  convention of <span style="color: #009900;">&lt;type&gt;</span>RowTemplate.
    return '#' + type + 'RowTemplate';
  }
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/script&gt;</span></span></pre></div></div>

<p>When you inject markup into the DOM, browsers will immediately parse and evaluate that markup just as they do during the initial page load &#8211; including any JavaScript code in the markup. Since browsers do this in the same single-thread that they execute JavaScript, <strong>it&#8217;s safe to assume that embedded functions are available immediately after the markup has been injected</strong>.</p>
<p>It seems almost too good to be true, like one of those handy techniques that works in every browser except some version of IE. However, embedding the supporting function inside the template file works in every browser I&#8217;ve tested, even including the full complement of JavaScript-enabled options on <a href="http://browsershots.org/" target="_blank" rel="nofollow">BrowserShots.org</a>.</p>
<h3>Conclusion</h3>
<p>I&#8217;ve been using this exact technique in production for about a month now. I initially came up with several approaches, but wanted to try them in real-world code before I recommended one. I&#8217;m happy to report that this has been working great for me so far. I hope you&#8217;ll find it helpful too.</p>
<p>One caveat is that you should be careful about loading and injecting the external template more than once. Injecting multiple copies of the template definitions over and over actually doesn&#8217;t break the rendering process in browsers I&#8217;ve tested, but it will unecessarily impact performance as the DOM grows larger with every new injection.</p>
<p>I&#8217;m going to cover that and another templating concurrency issue soon, but if you want a head start: test <code>$.template('#templateName')</code> to determine whether a particular template is already loaded and cached.</p>


<p>Related posts:<ol><li><a href='http://encosia.com/2010/10/05/using-external-templates-with-jquery-templates/' rel='bookmark' title='Permanent Link: Using external templates with jQuery Templates'>Using external templates with jQuery Templates</a></li>
<li><a href='http://encosia.com/2010/11/10/composition-with-jquery-templates-why-and-how/' rel='bookmark' title='Permanent Link: Composition with jQuery Templates: Why and How'>Composition with jQuery Templates: Why and How</a></li>
<li><a href='http://encosia.com/2010/05/03/a-few-thoughts-on-jquery-templating-with-jquery-tmpl/' rel='bookmark' title='Permanent Link: A few thoughts on jQuery templating with jQuery.tmpl'>A few thoughts on jQuery templating with jQuery.tmpl</a></li>
</ol></p><hr />

<p>You've been reading <a href="http://encosia.com/2010/12/02/jquery-templates-composite-rendering-and-remote-loading/">jQuery Templates, composite rendering, and remote loading</a>, originally posted at <a href="http://encosia.com">Encosia</a>.  I hope you enjoyed it, and thanks for reading.</p>

<p>If you've got any feedback, please click through and leave a comment; I'd love to hear from you. You can <a href="http://encosia.com/2010/12/02/jquery-templates-composite-rendering-and-remote-loading/#post-commentblock">click here to jump directly to the comment section of this post</a>.</p><div class="feedflare">
<a href="http://feeds.encosia.com/~ff/Encosia?a=N77XcSmNAmY:kRlzBmLVqTA:D7DqB2pKExk"><img src="http://feeds.feedburner.com/~ff/Encosia?i=N77XcSmNAmY:kRlzBmLVqTA:D7DqB2pKExk" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=N77XcSmNAmY:kRlzBmLVqTA:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=N77XcSmNAmY:kRlzBmLVqTA:aWKiLpGymzw"><img src="http://feeds.feedburner.com/~ff/Encosia?d=aWKiLpGymzw" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=N77XcSmNAmY:kRlzBmLVqTA:30RXbuXOgYA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=30RXbuXOgYA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=N77XcSmNAmY:kRlzBmLVqTA:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Encosia?i=N77XcSmNAmY:kRlzBmLVqTA:F7zBnMyn0Lo" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=N77XcSmNAmY:kRlzBmLVqTA:gIN9vFwOqvQ"><img src="http://feeds.feedburner.com/~ff/Encosia?i=N77XcSmNAmY:kRlzBmLVqTA:gIN9vFwOqvQ" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Encosia/~4/N77XcSmNAmY" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:91:"http://encosia.com/2010/12/02/jquery-templates-composite-rendering-and-remote-loading/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"33";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:86:"http://encosia.com/2010/12/02/jquery-templates-composite-rendering-and-remote-loading/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:12;a:6:{s:4:"data";s:47:"
		
		
		
		
		
				
		
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:46:"Composition with jQuery Templates: Why and How";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:51:"http://feeds.encosia.com/~r/Encosia/~3/jSshvjSpCyA/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:85:"http://encosia.com/2010/11/10/composition-with-jquery-templates-why-and-how/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Wed, 10 Nov 2010 21:26:12 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:3:{i:0;a:5:{s:4:"data";s:10:"JavaScript";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:2:"UI";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:26:"http://encosia.com/?p=1064";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:1118:"I doubt anyone was happier than I was to see that support for composite template rendering was added to jQuery Templates during the interim between the first community proposal and its recent release. If you&#8217;re a regular reader, you might remember that I personally lobbied for that functionality back in May, based on how I’ve [...]


Related posts:<ol><li><a href='http://encosia.com/2010/12/02/jquery-templates-composite-rendering-and-remote-loading/' rel='bookmark' title='Permanent Link: jQuery Templates, composite rendering, and remote loading'>jQuery Templates, composite rendering, and remote loading</a></li>
<li><a href='http://encosia.com/2010/10/05/using-external-templates-with-jquery-templates/' rel='bookmark' title='Permanent Link: Using external templates with jQuery Templates'>Using external templates with jQuery Templates</a></li>
<li><a href='http://encosia.com/2010/05/03/a-few-thoughts-on-jquery-templating-with-jquery-tmpl/' rel='bookmark' title='Permanent Link: A few thoughts on jQuery templating with jQuery.tmpl'>A few thoughts on jQuery templating with jQuery.tmpl</a></li>
</ol>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:9:"Dave Ward";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:35507:"<p>I doubt anyone was happier than I was to see that support for composite template rendering was added to jQuery Templates during the interim between the first community proposal and its recent release. If you&#8217;re a regular reader, you might remember that <a href="http://encosia.com/2010/05/03/a-few-thoughts-on-jquery-templating-with-jquery-tmpl/#template-composition" target="_blank">I personally lobbied for that functionality back in May</a>, based on how I’ve used <a href="http://jtemplates.tpython.com/doc/symbols/Include.html" target="_blank" rel="nofollow">jTemplates’ similar #include feature</a>.</p>
<p>Since then, a common question I’ve received amounts to: “Great, but why?”</p>
<p>I think that&#8217;s natural, because template composition is one of those things that can seem obscure until you put it to work for the first time. From that point onward, you’ll begin to see the structure of your client-side templates in a different light. Simplifying your templates into smaller logical parts and then combining those parts to create the desired end result is a powerful approach. It&#8217;s terrific for making large templates more approachable and maintainable over the lifetime of an application.</p>
<p>In this post, I want to show you an example of a scenario that template composition is well suited to, a couple ways that jQuery Templates&#8217; {{tmpl}} feature can be used to simplify that scenario, and a bonus advantage that the composition approach provides even after the template has been rendered.</p>
<h3>An example scenario: The invoice</h3>
<p>Imagine that you need to display an invoice for a company that resells taxable items and also sells services. Ideally, the invoice line items for those separate &#8220;types&#8221; should be displayed with different markup. To explore a simple example of that, let’s create a template to render the invoice for a fictional web development company.</p>
<p>Whether retrieved from a server-side endpoint or embedded in the page during initial rendering, the underlying data for that invoice might be structured something like this:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #003366; font-weight: bold;">var</span> invoice <span style="color: #339933;">=</span> <span style="color: #009900;">&#123;</span>
  invoiceItems<span style="color: #339933;">:</span> <span style="color: #009900;">&#91;</span>
    <span style="color: #009900;">&#123;</span> type<span style="color: #339933;">:</span> <span style="color: #3366CC;">'item'</span><span style="color: #339933;">,</span> 
      part<span style="color: #339933;">:</span> <span style="color: #3366CC;">'99Designs'</span><span style="color: #339933;">,</span> description<span style="color: #339933;">:</span> <span style="color: #3366CC;">'99 Designs Logo'</span><span style="color: #339933;">,</span> 
      price<span style="color: #339933;">:</span> <span style="color: #CC0000;">450.00</span><span style="color: #339933;">,</span> qty<span style="color: #339933;">:</span> <span style="color: #CC0000;">1</span> <span style="color: #009900;">&#125;</span><span style="color: #339933;">,</span>
    <span style="color: #009900;">&#123;</span> type<span style="color: #339933;">:</span> <span style="color: #3366CC;">'service'</span><span style="color: #339933;">,</span>
      service<span style="color: #339933;">:</span> <span style="color: #3366CC;">'Web development and testing'</span><span style="color: #339933;">,</span> 
      price<span style="color: #339933;">:</span> <span style="color: #CC0000;">25000.00</span> <span style="color: #009900;">&#125;</span><span style="color: #339933;">,</span>
    <span style="color: #009900;">&#123;</span> type<span style="color: #339933;">:</span> <span style="color: #3366CC;">'item'</span><span style="color: #339933;">,</span>
      part<span style="color: #339933;">:</span> <span style="color: #3366CC;">'LinodeMonthly'</span><span style="color: #339933;">,</span> description<span style="color: #339933;">:</span> <span style="color: #3366CC;">'Monthly site hosting'</span><span style="color: #339933;">,</span> 
      price<span style="color: #339933;">:</span> <span style="color: #CC0000;">40.00</span><span style="color: #339933;">,</span> qty<span style="color: #339933;">:</span> <span style="color: #CC0000;">12</span> <span style="color: #009900;">&#125;</span>
  <span style="color: #009900;">&#93;</span>
<span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span></pre></div></div>

<p>Following from that data structure, our goal for the invoice’s markup might look something like this:</p>

<div class="wp_syntax"><div class="code"><pre class="html" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;table&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tr&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>99Designs<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>99 Designs Logo<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>$450.00<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>1<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tr&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tr&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td</span> <span style="color: #000066;">colspan</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;2&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>Web development and testing<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td</span> <span style="color: #000066;">colspan</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;2&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>$25,000.00<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tr&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tr&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>LinodeMonthly<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>Monthly hosting at Linode<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>$40.00<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>12<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tr&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/table&gt;</span></span></pre></div></div>

<p>Notice that the markup for service and item rows is structurally different, to better represent the underlying data. When that’s desirable, composing sub-templates is the way to go. As we’ll see next, the alternative is unappealing.</p>
<h3>The old fashioned way</h3>
<p>The key to our goal of rendering different markup for services and items is to render different template code depending on the line item&#8217;s <code>type</code> property.</p>
<p>Of course, it’s possible to achieve that without using template composition. The <code>{{if}}</code> template tag allows you to concoct just about any conditional rendering scheme that you can image. For example:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #339933;">&lt;</span>script id<span style="color: #339933;">=</span><span style="color: #3366CC;">&quot;invoiceTemplate&quot;</span> type<span style="color: #339933;">=</span><span style="color: #3366CC;">&quot;x-jquery-tmpl&quot;</span><span style="color: #339933;">&gt;</span>
  <span style="color: #339933;">&lt;</span>table <span style="color: #003366; font-weight: bold;">class</span><span style="color: #339933;">=</span><span style="color: #3366CC;">&quot;invoice&quot;</span><span style="color: #339933;">&gt;</span>
    <span style="color: #009900;">&#123;</span><span style="color: #009900;">&#123;</span>each invoiceItems<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#125;</span>
      <span style="color: #009900;">&#123;</span><span style="color: #009900;">&#123;</span><span style="color: #000066; font-weight: bold;">if</span> type <span style="color: #339933;">==</span> <span style="color: #3366CC;">'service'</span><span style="color: #009900;">&#125;</span><span style="color: #009900;">&#125;</span>
      <span style="color: #339933;">&lt;</span>tr <span style="color: #003366; font-weight: bold;">class</span><span style="color: #339933;">=</span><span style="color: #3366CC;">&quot;service&quot;</span><span style="color: #339933;">&gt;</span>
        <span style="color: #339933;">&lt;</span>td colspan<span style="color: #339933;">=</span><span style="color: #3366CC;">&quot;2&quot;</span><span style="color: #339933;">&gt;</span>$<span style="color: #009900;">&#123;</span>service<span style="color: #009900;">&#125;</span><span style="color: #339933;">&lt;/</span>td<span style="color: #339933;">&gt;</span>
        <span style="color: #339933;">&lt;</span>td colspan<span style="color: #339933;">=</span><span style="color: #3366CC;">&quot;2&quot;</span><span style="color: #339933;">&gt;</span>$<span style="color: #009900;">&#123;</span>price<span style="color: #009900;">&#125;</span><span style="color: #339933;">&lt;/</span>td<span style="color: #339933;">&gt;</span>
      <span style="color: #339933;">&lt;/</span>tr<span style="color: #339933;">&gt;</span>          
      <span style="color: #009900;">&#123;</span><span style="color: #009900;">&#123;</span><span style="color: #000066; font-weight: bold;">else</span> type <span style="color: #339933;">==</span> <span style="color: #3366CC;">'item'</span><span style="color: #009900;">&#125;</span><span style="color: #009900;">&#125;</span>
      <span style="color: #339933;">&lt;</span>tr <span style="color: #003366; font-weight: bold;">class</span><span style="color: #339933;">=</span><span style="color: #3366CC;">&quot;item&quot;</span><span style="color: #339933;">&gt;</span>
        <span style="color: #339933;">&lt;</span>td<span style="color: #339933;">&gt;</span>$<span style="color: #009900;">&#123;</span><span style="color: #000066; font-weight: bold;">item</span><span style="color: #009900;">&#125;</span><span style="color: #339933;">&lt;/</span>td<span style="color: #339933;">&gt;</span>
        <span style="color: #339933;">&lt;</span>td<span style="color: #339933;">&gt;</span>$<span style="color: #009900;">&#123;</span>description<span style="color: #009900;">&#125;</span><span style="color: #339933;">&lt;/</span>td<span style="color: #339933;">&gt;</span>
        <span style="color: #339933;">&lt;</span>td<span style="color: #339933;">&gt;</span>$<span style="color: #009900;">&#123;</span>price<span style="color: #009900;">&#125;</span><span style="color: #339933;">&lt;/</span>td<span style="color: #339933;">&gt;</span>
        <span style="color: #339933;">&lt;</span>td<span style="color: #339933;">&gt;</span>$<span style="color: #009900;">&#123;</span>qty<span style="color: #009900;">&#125;</span><span style="color: #339933;">&lt;/</span>td<span style="color: #339933;">&gt;</span>
      <span style="color: #339933;">&lt;/</span>tr<span style="color: #339933;">&gt;</span>          
      <span style="color: #009900;">&#123;</span><span style="color: #009900;">&#123;</span><span style="color: #339933;">/</span><span style="color: #000066; font-weight: bold;">if</span><span style="color: #009900;">&#125;</span><span style="color: #009900;">&#125;</span>
    <span style="color: #009900;">&#123;</span><span style="color: #009900;">&#123;</span><span style="color: #339933;">/</span>each<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#125;</span>
  <span style="color: #339933;">&lt;/</span>table<span style="color: #339933;">&gt;</span>
<span style="color: #339933;">&lt;/</span>script<span style="color: #339933;">&gt;</span></pre></div></div>

<p>That works, but it’s a mess.</p>
<p>Even with only two types of items, the template is already fairly difficult to read and digest. Just imagine if there were a dozen item types instead of only two. Bundling all the templates together would quickly become a maintenance nightmare.</p>
<p>Wouldn&#8217;t it be nice if we could separate the row templates and define them individually? The <code>{{tmpl}}</code> template tag allows us to do just that.</p>
<h3>Reorganizing the template for composition</h3>
<p>First, we need to separate the template into a container and individual row templates for each line item <code>type</code>. The container will be rendered once for every invoice, and the row templates as dictated by the underlying data.</p>
<p>In this case, the container template will simply begin and end our <code>&lt;table&gt;</code>. In a real-world template, this is where you might also include a <code>&lt;thead&gt;</code> with column headings.</p>

<div class="wp_syntax"><div class="code"><pre class="html" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;script</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;invoiceTemplate&quot;</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;x-jquery-tmpl&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;table</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;invoice&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #060; font-style: italic;">&lt;!-- Composition magic goes here! --&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/table&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/script&gt;</span></span></pre></div></div>

<p>The row templates are straightforward, extracted from the combined template we looked at in the last section:</p>

<div class="wp_syntax"><div class="code"><pre class="html" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;script</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;serviceRowTemplate&quot;</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;x-jquery-tmpl&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tr</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;service&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td</span> <span style="color: #000066;">colspan</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;2&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>${service}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td</span> <span style="color: #000066;">colspan</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;2&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>${price}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tr&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/script&gt;</span></span>
&nbsp;
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;script</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;itemRowTemplate&quot;</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;x-jquery-tmpl&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tr</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;item&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>${item}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>${description}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>${price}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;td&gt;</span></span>${qty}<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/td&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tr&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/script&gt;</span></span></pre></div></div>

<p>Note that the templates have IDs that correspond to the <code>type</code> they&#8217;re designed to render. That will come in handy a bit later.</p>
<h3>Template composition with jQuery Templates</h3>
<p>Now, it&#8217;s finally time to add that composition magic to the container template. jQuery Templates has a special template tag which provides for rendering and composing nested templates: <code>{{tmpl}}</code>.</p>
<p>The <code>{{tmpl}}</code> tag has several usages (<a href="http://api.jquery.com/template-tag-tmpl/" target="_blank" rel="nofollow">documentation</a>), but the one I want to focus on is the one that accepts a selector as its <em>template</em> parameter. When a selector is specified, jQuery Templates locates the indicated template, renders it, and then replaces the <code>{{tmpl}}</code> token with that rendered markup.</p>
<p>The <code>{{tmpl}}</code> command also accepts a parameter specifying what data the sub-template should be rendered with. Including the template selector, the command will look like this: <code>{{tmpl(dataItem) "#TemplateID"}}</code>.</p>
<p>Putting that all together, this container template will use each item&#8217;s <code>type</code> to render the item with the appropriate row template:</p>

<div class="wp_syntax"><div class="code"><pre class="html" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;script</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;invoiceTemplate&quot;</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;x-jquery-tmpl&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;table</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;invoice&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    {{each invoiceItems}}
      {{if type == 'service'}}
        {{tmpl($value) '#serviceRowTemplate'}}
      {{else type == 'item'}}
        {{tmpl($value) '#itemRowTemplate'}}
      {{/if}}
    {{/each}}
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/table&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/script&gt;</span></span></pre></div></div>

<p>If you aren&#8217;t familiar with <code>{{each}}</code> and its $value pseudo variable, all you need to know is that it contains the current iteration&#8217;s data item. It&#8217;s the same value that you would normally capture as the second parameter to an $.each() callback. In fact, <code>{{each}}</code> can also be used in that fashion instead:</p>

<div class="wp_syntax"><div class="code"><pre class="html" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;script</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;invoiceTemplate&quot;</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;x-jquery-tmpl&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;table</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;invoice&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>
    {{each(i, item) invoiceItems}}
      {{if type == 'service'}}
        {{tmpl(item) '#serviceRowTemplate'}}
      {{else type == 'item'}}
        {{tmpl(item) '#itemRowTemplate'}}
      {{/if}}
    {{/each}}
  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/table&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/script&gt;</span></span></pre></div></div>

<p>I prefer using the pseudo variable since it&#8217;s more concise, but both are equivalent.</p>
<p>For now, we’re still stuck with the <code>{{if}}</code> to determine which row template to render, but getting the row templates out of that conditional block has cleaned things up quite a bit. Don’t worry if the conditional strikes you as a distasteful remnant of the original approach. We’ll fix that soon.</p>
<h3>Rendering the composite template</h3>
<p>Having defined the container template and its sub-templates, using jQuery Templates to render the entire group is just as easy as rendering a single template. Assuming the same <code>invoice</code> variable as seen before:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;">$<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'#invoiceTemplate'</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">tmpl</span><span style="color: #009900;">&#40;</span>invoice<span style="color: #009900;">&#41;</span>.<span style="color: #660066;">appendTo</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'body'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>As far as we know at the time we render the container, nothing has changed (and that&#8217;s part of the point), yet the refactored template is going to be quite a bit easier to understand and maintain.</p>
<h3>Unconditional rendering love</h3>
<p>Now that the templates are separated, things are a lot cleaner than before. However, that remnant <code>{{if}}</code> block is still a bit irritating. If you end up with more than just a couple item types, the conditional will require ongoing maintenance and cruft up the template badly.</p>
<p>Instead of that explicit testing and branching to pick the right template, we can clean things up by automatically searching for a row template that matches our naming convention of <em>type</em>RowTemplate. To do that, we just need to build a JavaScript function that takes a <code>type</code> parameter and returns the appropriate selector string:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #003366; font-weight: bold;">function</span> get_invoiceRowTemplateName<span style="color: #009900;">&#40;</span>type<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
  <span style="color: #006600; font-style: italic;">// Return a template selector that matches our </span>
  <span style="color: #006600; font-style: italic;">//  convention of &lt;type&gt;RowTemplate.</span>
  <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #3366CC;">'#'</span> <span style="color: #339933;">+</span> type <span style="color: #339933;">+</span> <span style="color: #3366CC;">'RowTemplate'</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span></pre></div></div>

<p>Updating the container template to use our new function completely eliminates that <code>{{if}}</code> block:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #339933;">&lt;</span>script id<span style="color: #339933;">=</span><span style="color: #3366CC;">&quot;invoiceTemplate&quot;</span> type<span style="color: #339933;">=</span><span style="color: #3366CC;">&quot;x-jquery-tmpl&quot;</span><span style="color: #339933;">&gt;</span>
  <span style="color: #339933;">&lt;</span>table <span style="color: #003366; font-weight: bold;">class</span><span style="color: #339933;">=</span><span style="color: #3366CC;">&quot;invoice&quot;</span><span style="color: #339933;">&gt;</span>
  <span style="color: #009900;">&#123;</span><span style="color: #009900;">&#123;</span>each lineItems<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#125;</span>
    <span style="color: #009900;">&#123;</span><span style="color: #009900;">&#123;</span>tmpl<span style="color: #009900;">&#40;</span>$value<span style="color: #009900;">&#41;</span> get_invoiceRowTemplateName<span style="color: #009900;">&#40;</span>type<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#125;</span><span style="color: #009900;">&#125;</span>
  <span style="color: #009900;">&#123;</span><span style="color: #009900;">&#123;</span><span style="color: #339933;">/</span>each<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#125;</span>
  <span style="color: #339933;">&lt;/</span>table<span style="color: #339933;">&gt;</span>
<span style="color: #339933;">&lt;/</span>script<span style="color: #339933;">&gt;</span></pre></div></div>

<p>Now, adapting to new item types is as simple as creating an appropriately named template. Convention over configuration, as they say.</p>
<h3>Bonus: Rendering additional line items</h3>
<p>Cleaning up the template is a good enough reason alone to use template composition, but the benefits extend beyond the initial rendering process. A nice side-effect of the compositional approach is that it&#8217;s easy to render additional rows even after the template has been rendered.</p>
<p>It&#8217;s easy to imagine that we might need to let users add new items to our invoice after it has been displayed. Assuming the invoice is already rendered, adding a matching row to it is as easy as this:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #003366; font-weight: bold;">var</span> newItem <span style="color: #339933;">=</span> <span style="color: #009900;">&#123;</span>
  type<span style="color: #339933;">:</span> <span style="color: #3366CC;">'service'</span><span style="color: #339933;">,</span>
  service<span style="color: #339933;">:</span> <span style="color: #3366CC;">'Service with a smile'</span><span style="color: #339933;">,</span>
  price<span style="color: #339933;">:</span> <span style="color: #CC0000;">0.00</span>
<span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #006600; font-style: italic;">// Determine which template should be used to render the new item.</span>
<span style="color: #003366; font-weight: bold;">var</span> tmpl <span style="color: #339933;">=</span> get_invoiceRowTemplateName<span style="color: #009900;">&#40;</span>newItem.<span style="color: #660066;">type</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #006600; font-style: italic;">// Render that template, using the new item as data,</span>
<span style="color: #006600; font-style: italic;">//  and append that new row to the end of the existing invoice table.</span>
$<span style="color: #009900;">&#40;</span>tmpl<span style="color: #009900;">&#41;</span>.<span style="color: #660066;">tmpl</span><span style="color: #009900;">&#40;</span>newItem<span style="color: #009900;">&#41;</span>.<span style="color: #660066;">appendTo</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'#table.invoice'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>That&#8217;s cleaner, easier, and faster than the common alternatives of cloning an existing row, building the HTML manually, or completely re-rendering the entire table with updated data.</p>
<p>Perhaps more importantly, it centralizes your presentation code. When changes only need to be made once, in a single location, you are guaranteed to see less bugs over time.</p>
<h3>Conclusion</h3>
<p>I&#8217;ve been using this compositional approach with jTemplates for a couple years now, and I cannot overstate how helpful it is when you&#8217;re working on real-world apps with large, complex client-side templates. I do hope you&#8217;ll give it a try in your own projects, because I know you won&#8217;t be disappointed.</p>
<p>Kudos to everyone who worked on jQuery Templates and helped {{tmpl}} see its way into the first release. I think it&#8217;s an excellent implementation of the feature &#8211; certainly easier to use and understand than jTemplates&#8217; #include.</p>
<p>An important piece of the puzzle that&#8217;s still missing at this point is a technique for storing these composite template groups in an external file and loading them asynchronously, as with <a href="http://encosia.com/2010/10/05/using-external-templates-with-jquery-templates/">single templates in my last post</a>. Unfortunately, the simplistic approach in my previous post doesn&#8217;t work with composite templates. However it&#8217;s still very easily doable. I&#8217;ll cover that next, so stay tuned.</p>
<p>What do you think? Are you using template composition already? If not, have I managed to entice you to give it a try?</p>


<p>Related posts:<ol><li><a href='http://encosia.com/2010/12/02/jquery-templates-composite-rendering-and-remote-loading/' rel='bookmark' title='Permanent Link: jQuery Templates, composite rendering, and remote loading'>jQuery Templates, composite rendering, and remote loading</a></li>
<li><a href='http://encosia.com/2010/10/05/using-external-templates-with-jquery-templates/' rel='bookmark' title='Permanent Link: Using external templates with jQuery Templates'>Using external templates with jQuery Templates</a></li>
<li><a href='http://encosia.com/2010/05/03/a-few-thoughts-on-jquery-templating-with-jquery-tmpl/' rel='bookmark' title='Permanent Link: A few thoughts on jQuery templating with jQuery.tmpl'>A few thoughts on jQuery templating with jQuery.tmpl</a></li>
</ol></p><hr />

<p>You've been reading <a href="http://encosia.com/2010/11/10/composition-with-jquery-templates-why-and-how/">Composition with jQuery Templates: Why and How</a>, originally posted at <a href="http://encosia.com">Encosia</a>.  I hope you enjoyed it, and thanks for reading.</p>

<p>If you've got any feedback, please click through and leave a comment; I'd love to hear from you. You can <a href="http://encosia.com/2010/11/10/composition-with-jquery-templates-why-and-how/#post-commentblock">click here to jump directly to the comment section of this post</a>.</p><div class="feedflare">
<a href="http://feeds.encosia.com/~ff/Encosia?a=jSshvjSpCyA:KXGaY9TgC4Y:D7DqB2pKExk"><img src="http://feeds.feedburner.com/~ff/Encosia?i=jSshvjSpCyA:KXGaY9TgC4Y:D7DqB2pKExk" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=jSshvjSpCyA:KXGaY9TgC4Y:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=jSshvjSpCyA:KXGaY9TgC4Y:aWKiLpGymzw"><img src="http://feeds.feedburner.com/~ff/Encosia?d=aWKiLpGymzw" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=jSshvjSpCyA:KXGaY9TgC4Y:30RXbuXOgYA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=30RXbuXOgYA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=jSshvjSpCyA:KXGaY9TgC4Y:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Encosia?i=jSshvjSpCyA:KXGaY9TgC4Y:F7zBnMyn0Lo" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=jSshvjSpCyA:KXGaY9TgC4Y:gIN9vFwOqvQ"><img src="http://feeds.feedburner.com/~ff/Encosia?i=jSshvjSpCyA:KXGaY9TgC4Y:gIN9vFwOqvQ" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Encosia/~4/jSshvjSpCyA" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:81:"http://encosia.com/2010/11/10/composition-with-jquery-templates-why-and-how/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"35";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:76:"http://encosia.com/2010/11/10/composition-with-jquery-templates-why-and-how/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:13;a:6:{s:4:"data";s:47:"
		
		
		
		
		
				
		
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:46:"Using external templates with jQuery Templates";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:51:"http://feeds.encosia.com/~r/Encosia/~3/uwDEiNq9Evw/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:86:"http://encosia.com/2010/10/05/using-external-templates-with-jquery-templates/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Tue, 05 Oct 2010 18:15:27 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:3:{i:0;a:5:{s:4:"data";s:10:"JavaScript";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:2:"UI";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:26:"http://encosia.com/?p=1053";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:1134:"Now that jQuery Templates is official and definitely will not include remote template loading, I wanted to publish a quick guide on implementing that yourself. As I mentioned previously, there’s a handy interaction between jQuery Templates’ API and jQuery’s AJAX methods that makes this easier than you might expect. In this post, I’ll show you [...]


Related posts:<ol><li><a href='http://encosia.com/2010/12/02/jquery-templates-composite-rendering-and-remote-loading/' rel='bookmark' title='Permanent Link: jQuery Templates, composite rendering, and remote loading'>jQuery Templates, composite rendering, and remote loading</a></li>
<li><a href='http://encosia.com/2010/11/10/composition-with-jquery-templates-why-and-how/' rel='bookmark' title='Permanent Link: Composition with jQuery Templates: Why and How'>Composition with jQuery Templates: Why and How</a></li>
<li><a href='http://encosia.com/2010/05/03/a-few-thoughts-on-jquery-templating-with-jquery-tmpl/' rel='bookmark' title='Permanent Link: A few thoughts on jQuery templating with jQuery.tmpl'>A few thoughts on jQuery templating with jQuery.tmpl</a></li>
</ol>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:9:"Dave Ward";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:10711:"<p>Now that jQuery Templates is official and definitely will not include remote template loading, I wanted to publish a quick guide on implementing that yourself. <a href="http://encosia.com/2010/05/03/a-few-thoughts-on-jquery-templating-with-jquery-tmpl/#External-templates" target="_blank">As I mentioned previously</a>, there’s a handy interaction between jQuery Templates’ API and jQuery’s AJAX methods that makes this easier than you might expect.</p>
<p>In this post, I’ll show you how to use a plain string as a template, how to asynchronously load an external template file as a string, and how to render it with jQuery Templates once it’s loaded.</p>
<h3>Defining an external template</h3>
<p>Defining a template suitable for remote loading requires almost no extra effort. Simply create a new file and fill it with the same sort of jQuery Templates fragment that you might normally embed in a text/html &lt;script&gt; element.</p>
<p>For example, given this <code>person</code> object:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #003366; font-weight: bold;">var</span> person <span style="color: #339933;">=</span> <span style="color: #009900;">&#123;</span> <span style="color: #000066;">name</span><span style="color: #339933;">:</span> <span style="color: #3366CC;">'Dave'</span> <span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span></pre></div></div>

<p>You might define this template for that data in a file called PersonTemplate.htm:</p>

<div class="wp_syntax"><div class="code"><pre class="html" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;p&gt;</span></span>Hello, ${name}.<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/p&gt;</span></span></pre></div></div>

<p><strong>Be sure not to wrap the template in a &lt;script&gt; element</strong>. Since we’ll be loading it remotely, that obscuring measure isn&#8217;t necessary. Also be sure not to include any of the HTML boilerplate that may come along with creating a new HTML file in your editor of choice, like &lt;html&gt; or &lt;body&gt;.</p>
<p>An added bonus that comes along with dropping the &lt;script&gt; container is that you get more reliable syntax highlighting for the template&#8217;s markup. Most editors don’t provide HTML syntax highlighting within &lt;script&gt; elements, even when their type is text/html, but work fine in the external files.</p>
<h3>Using strings as templates</h3>
<p>Though most jQuery Templates examples revolve around referencing template definitions hidden inside &lt;script&gt; elements, it’s also possible to provide the template as a plain string. Using the <code>$.tmpl(template, data)</code> syntax, a simple string version of the template may be provided as that first parameter.</p>
<p>For example, these are both perfectly valid ways to render a template, using the <code>person</code> object from the previous section:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #006600; font-style: italic;">// Specifying the template inline.</span>
$.<span style="color: #660066;">tmpl</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'&lt;p&gt;Hello, ${name}.&lt;/p&gt;'</span><span style="color: #339933;">,</span> person<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #006600; font-style: italic;">// Assign that same template to a JavaScript variable, and then</span>
<span style="color: #006600; font-style: italic;">//  use that string value as a template parameter to $.tmpl().</span>
<span style="color: #003366; font-weight: bold;">var</span> salutationTmpl <span style="color: #339933;">=</span> <span style="color: #3366CC;">'&lt;p&gt;Hello, ${name}.&lt;/p&gt;'</span><span style="color: #339933;">;</span>
&nbsp;
$.<span style="color: #660066;">tmpl</span><span style="color: #009900;">&#40;</span>salutationTmpl<span style="color: #339933;">,</span> person<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>With that ability to use a string as a template, we just need a way to get the external template file’s content loaded into a string variable.</p>
<h3>Loading the external template</h3>
<p>With that in mind, probably the easiest way to load an external template is to use <a href="http://api.jquery.com/jQuery.get/" rel="nofollow" target="_blank">jQuery’s $.get() method</a>. When you target $.get() at a static HTML file, the result passed to its callback is a string containing the file&#8217;s content. Exactly what we’re after.</p>
<p>For example, if an external template were stored in a file named PersonTemplate.htm, this is how you could use $.get() to load and render that external template with jQuery Templates:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #006600; font-style: italic;">// Asynchronously our PersonTemplate's content.</span>
$.<span style="color: #660066;">get</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'PersonTemplate.htm'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>template<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
&nbsp;
  <span style="color: #006600; font-style: italic;">// Use that stringified template with $.tmpl() and </span>
  <span style="color: #006600; font-style: italic;">//  inject the rendered result into the body.</span>
  $.<span style="color: #660066;">tmpl</span><span style="color: #009900;">&#40;</span>template<span style="color: #339933;">,</span> person<span style="color: #009900;">&#41;</span>.<span style="color: #660066;">appendTo</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'body'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>That’s it.</p>
<p>Because you have to get involved with more of the moving parts, this is slightly more complex than jTemplates’ <a href="http://jtemplates.tpython.com/doc/symbols/jQuery.fn.html#.processTemplateURL" rel="nofollow" target="_blank">processTemplateURL</a>, but it&#8217;s very manageable.</p>
<h3>Caveats</h3>
<p><strong>Compilation caching</strong> – When you use this method, it’s important to keep in mind that jQuery Templates will not automatically cache the compiled template. If you intend to reuse the same template many times during a given pageview, this approach is slower than the embedded &lt;script&gt; technique.</p>
<p>It’s possible to work around that drawback by using $.template() to compile the remotely loaded template and store it manually, but I&#8217;m omitting that here to keep things simple.</p>
<p>If you’re interested, I’ll cover that in follow up post.</p>
<p><strong>HTTP caching</strong> – In production, you should ensure that your server’s caching configuration is correct. If your server sends a proper expires header, requesting the same template multiple times during the lifespan of a page will only cause the browser to make one HTTP request. Even subsequent HTTP requests to check for a 304 status aren’t necessary if a future expires header is set on the response.</p>
<p><strong>Template file naming</strong> – I recommend using a standard filename extension for your external template files, like <code>.htm</code> or <code>.txt</code>. I started out using more descriptive extensions like <code>.tpl</code>, but server configuration was a constant hassle. Important things like HTTP compression, expires headers, and even serving the files at all are common issues when using nonstandard extensions.</p>


<p>Related posts:<ol><li><a href='http://encosia.com/2010/12/02/jquery-templates-composite-rendering-and-remote-loading/' rel='bookmark' title='Permanent Link: jQuery Templates, composite rendering, and remote loading'>jQuery Templates, composite rendering, and remote loading</a></li>
<li><a href='http://encosia.com/2010/11/10/composition-with-jquery-templates-why-and-how/' rel='bookmark' title='Permanent Link: Composition with jQuery Templates: Why and How'>Composition with jQuery Templates: Why and How</a></li>
<li><a href='http://encosia.com/2010/05/03/a-few-thoughts-on-jquery-templating-with-jquery-tmpl/' rel='bookmark' title='Permanent Link: A few thoughts on jQuery templating with jQuery.tmpl'>A few thoughts on jQuery templating with jQuery.tmpl</a></li>
</ol></p><hr />

<p>You've been reading <a href="http://encosia.com/2010/10/05/using-external-templates-with-jquery-templates/">Using external templates with jQuery Templates</a>, originally posted at <a href="http://encosia.com">Encosia</a>.  I hope you enjoyed it, and thanks for reading.</p>

<p>If you've got any feedback, please click through and leave a comment; I'd love to hear from you. You can <a href="http://encosia.com/2010/10/05/using-external-templates-with-jquery-templates/#post-commentblock">click here to jump directly to the comment section of this post</a>.</p><div class="feedflare">
<a href="http://feeds.encosia.com/~ff/Encosia?a=uwDEiNq9Evw:dyx3BT1KB_E:D7DqB2pKExk"><img src="http://feeds.feedburner.com/~ff/Encosia?i=uwDEiNq9Evw:dyx3BT1KB_E:D7DqB2pKExk" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=uwDEiNq9Evw:dyx3BT1KB_E:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=uwDEiNq9Evw:dyx3BT1KB_E:aWKiLpGymzw"><img src="http://feeds.feedburner.com/~ff/Encosia?d=aWKiLpGymzw" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=uwDEiNq9Evw:dyx3BT1KB_E:30RXbuXOgYA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=30RXbuXOgYA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=uwDEiNq9Evw:dyx3BT1KB_E:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Encosia?i=uwDEiNq9Evw:dyx3BT1KB_E:F7zBnMyn0Lo" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=uwDEiNq9Evw:dyx3BT1KB_E:gIN9vFwOqvQ"><img src="http://feeds.feedburner.com/~ff/Encosia?i=uwDEiNq9Evw:dyx3BT1KB_E:gIN9vFwOqvQ" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Encosia/~4/uwDEiNq9Evw" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:82:"http://encosia.com/2010/10/05/using-external-templates-with-jquery-templates/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"32";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:77:"http://encosia.com/2010/10/05/using-external-templates-with-jquery-templates/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:14;a:6:{s:4:"data";s:47:"
		
		
		
		
		
				
		
		

		
		
			
			
		
		";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:6:{s:0:"";a:7:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:56:"Understanding jQuery’s impact on Microsoft and ASP.NET";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:51:"http://feeds.encosia.com/~r/Encosia/~3/E1bBMeuHTLQ/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:93:"http://encosia.com/2010/10/04/understanding-jquerys-impact-on-microsoft-and-asp-net/#comments";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Mon, 04 Oct 2010 17:49:45 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:3:{i:0;a:5:{s:4:"data";s:4:"AJAX";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:7:"ASP.NET";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:6:"jQuery";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:26:"http://encosia.com/?p=1052";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:1067:"It hasn’t been easy keeping up with the twists and turns that Microsoft’s client-side frameworks and libraries have taken in the past couple years. Even today, I still hear from a surprising number of developers that don’t realize the ASP.NET Ajax Library is dead. With that in mind, I’ve been writing an article on and [...]


Related posts:<ol><li><a href='http://encosia.com/2009/05/13/what-aspnet-developers-should-know-about-jquery/' rel='bookmark' title='Permanent Link: What ASP.NET developers should know about jQuery'>What ASP.NET developers should know about jQuery</a></li>
<li><a href='http://encosia.com/2008/10/10/altnet-podcast-jquery-in-aspnet/' rel='bookmark' title='Permanent Link: Alt.NET Podcast &ndash; jQuery in ASP.NET'>Alt.NET Podcast &ndash; jQuery in ASP.NET</a></li>
<li><a href='http://encosia.com/2008/05/29/using-jquery-to-directly-call-aspnet-ajax-page-methods/' rel='bookmark' title='Permanent Link: Using jQuery to directly call ASP.NET AJAX page methods'>Using jQuery to directly call ASP.NET AJAX page methods</a></li>
</ol>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:9:"Dave Ward";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:40:"http://purl.org/rss/1.0/modules/content/";a:1:{s:7:"encoded";a:1:{i:0;a:5:{s:4:"data";s:4820:"<p>It hasn’t been easy keeping up with the twists and turns that Microsoft’s client-side frameworks and libraries have taken in the past couple years. Even today, I still hear from a surprising number of developers that don’t realize the ASP.NET Ajax Library is dead.</p>
<p>With that in mind, I’ve been writing an article on and off for the past several months that attempts to disambiguate Microsoft’s various client-side initiatives and hopefully provide some clarity. When Karsten from Mix Online contacted me about writing another article for them, we decided that this would be a perfect follow up to <a href="http://visitmix.com/Articles/What-ASPNET-Developers-Should-Know-About-jQuery" target="_blank">the jQuery article I wrote for them last year</a>.</p>
<p>Here’s the first few paragraphs:</p>
<blockquote>
<p>When Microsoft announced they would begin providing official support for jQuery, few of us realized how profoundly that announcement would eventually impact client-side development on the ASP.NET platform. Since that announcement, using jQuery with ASP.NET has moved from the obscure, to a central role in ASP.NET MVC’s client-side story, and now to the point of potentially superseding ASP.NET AJAX itself.</p>
<p>The journey hasn’t been all smooth. With Microsoft’s move toward jQuery, the ASP.NET AJAX, Microsoft Ajax Library, ASP.NET Ajax Library and Ajax Control Toolkit roadmaps have been uncertain at times. This has made it difficult to keep track of which projects are still relevant, and especially which you should choose going forward.</p>
<p>In my last article for Mix Online, I discussed what ASP.NET needed to know about jQuery from development perspective. In this article, I want to provide clarity on the events that led us to this point, talk about what portions of the current AJAX framework are and aren’t affected by recent changes and show you where we’re headed next. In addition, I’ll dive into the implications of the recent announcement about the adoption of Microsoft’s template library by the jQuery core.</p>
</blockquote>
<p><a href="http://visitmix.com/Articles/Javascript-Libraries-and-ASPNET" class="more-link">Click here to read the rest of this article at Mix Online</a></p>


<p>Related posts:<ol><li><a href='http://encosia.com/2009/05/13/what-aspnet-developers-should-know-about-jquery/' rel='bookmark' title='Permanent Link: What ASP.NET developers should know about jQuery'>What ASP.NET developers should know about jQuery</a></li>
<li><a href='http://encosia.com/2008/10/10/altnet-podcast-jquery-in-aspnet/' rel='bookmark' title='Permanent Link: Alt.NET Podcast &ndash; jQuery in ASP.NET'>Alt.NET Podcast &ndash; jQuery in ASP.NET</a></li>
<li><a href='http://encosia.com/2008/05/29/using-jquery-to-directly-call-aspnet-ajax-page-methods/' rel='bookmark' title='Permanent Link: Using jQuery to directly call ASP.NET AJAX page methods'>Using jQuery to directly call ASP.NET AJAX page methods</a></li>
</ol></p><hr />

<p>You've been reading <a href="http://encosia.com/2010/10/04/understanding-jquerys-impact-on-microsoft-and-asp-net/">Understanding jQuery&#8217;s impact on Microsoft and ASP.NET</a>, originally posted at <a href="http://encosia.com">Encosia</a>.  I hope you enjoyed it, and thanks for reading.</p>

<p>If you've got any feedback, please click through and leave a comment; I'd love to hear from you. You can <a href="http://encosia.com/2010/10/04/understanding-jquerys-impact-on-microsoft-and-asp-net/#post-commentblock">click here to jump directly to the comment section of this post</a>.</p><div class="feedflare">
<a href="http://feeds.encosia.com/~ff/Encosia?a=E1bBMeuHTLQ:X2VM1fIcZmQ:D7DqB2pKExk"><img src="http://feeds.feedburner.com/~ff/Encosia?i=E1bBMeuHTLQ:X2VM1fIcZmQ:D7DqB2pKExk" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=E1bBMeuHTLQ:X2VM1fIcZmQ:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=yIl2AUoC8zA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=E1bBMeuHTLQ:X2VM1fIcZmQ:aWKiLpGymzw"><img src="http://feeds.feedburner.com/~ff/Encosia?d=aWKiLpGymzw" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=E1bBMeuHTLQ:X2VM1fIcZmQ:30RXbuXOgYA"><img src="http://feeds.feedburner.com/~ff/Encosia?d=30RXbuXOgYA" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=E1bBMeuHTLQ:X2VM1fIcZmQ:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/Encosia?i=E1bBMeuHTLQ:X2VM1fIcZmQ:F7zBnMyn0Lo" border="0"></img></a> <a href="http://feeds.encosia.com/~ff/Encosia?a=E1bBMeuHTLQ:X2VM1fIcZmQ:gIN9vFwOqvQ"><img src="http://feeds.feedburner.com/~ff/Encosia?i=E1bBMeuHTLQ:X2VM1fIcZmQ:gIN9vFwOqvQ" border="0"></img></a>
</div><img src="http://feeds.feedburner.com/~r/Encosia/~4/E1bBMeuHTLQ" height="1" width="1"/>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:36:"http://wellformedweb.org/CommentAPI/";a:1:{s:10:"commentRss";a:1:{i:0;a:5:{s:4:"data";s:89:"http://encosia.com/2010/10/04/understanding-jquerys-impact-on-microsoft-and-asp-net/feed/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:38:"http://purl.org/rss/1.0/modules/slash/";a:1:{s:8:"comments";a:1:{i:0;a:5:{s:4:"data";s:2:"11";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:84:"http://encosia.com/2010/10/04/understanding-jquerys-impact-on-microsoft-and-asp-net/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}}}s:44:"http://purl.org/rss/1.0/modules/syndication/";a:2:{s:12:"updatePeriod";a:1:{i:0;a:5:{s:4:"data";s:6:"hourly";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:15:"updateFrequency";a:1:{i:0;a:5:{s:4:"data";s:1:"1";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:27:"http://www.w3.org/2005/Atom";a:1:{s:4:"link";a:2:{i:0;a:5:{s:4:"data";s:0:"";s:7:"attribs";a:1:{s:0:"";a:3:{s:3:"rel";s:4:"self";s:4:"type";s:19:"application/rss+xml";s:4:"href";s:32:"http://feeds.encosia.com/Encosia";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:0:"";s:7:"attribs";a:1:{s:0:"";a:2:{s:3:"rel";s:3:"hub";s:4:"href";s:32:"http://pubsubhubbub.appspot.com/";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:4:{s:4:"info";a:1:{i:0;a:5:{s:4:"data";s:0:"";s:7:"attribs";a:1:{s:0:"";a:1:{s:3:"uri";s:7:"encosia";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:14:"emailServiceId";a:1:{i:0;a:5:{s:4:"data";s:7:"Encosia";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:18:"feedburnerHostname";a:1:{i:0;a:5:{s:4:"data";s:28:"http://feedburner.google.com";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:9:"feedFlare";a:8:{i:0;a:5:{s:4:"data";s:24:"Subscribe with My Yahoo!";s:7:"attribs";a:1:{s:0:"";a:2:{s:4:"href";s:72:"http://add.my.yahoo.com/rss?url=http%3A%2F%2Ffeeds.encosia.com%2FEncosia";s:3:"src";s:59:"http://us.i1.yimg.com/us.yimg.com/i/us/my/addtomyyahoo4.gif";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:24:"Subscribe with NewsGator";s:7:"attribs";a:1:{s:0:"";a:2:{s:4:"href";s:96:"http://www.newsgator.com/ngs/subscriber/subext.aspx?url=http%3A%2F%2Ffeeds.encosia.com%2FEncosia";s:3:"src";s:42:"http://www.newsgator.com/images/ngsub1.gif";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:24:"Subscribe with Bloglines";s:7:"attribs";a:1:{s:0:"";a:2:{s:4:"href";s:61:"http://www.bloglines.com/sub/http://feeds.encosia.com/Encosia";s:3:"src";s:48:"http://www.bloglines.com/images/sub_modern11.gif";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:3;a:5:{s:4:"data";s:23:"Subscribe with Netvibes";s:7:"attribs";a:1:{s:0:"";a:2:{s:4:"href";s:82:"http://www.netvibes.com/subscribe.php?url=http%3A%2F%2Ffeeds.encosia.com%2FEncosia";s:3:"src";s:44:"http://www.netvibes.com/img/add2netvibes.gif";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:4;a:5:{s:4:"data";s:21:"Subscribe with Google";s:7:"attribs";a:1:{s:0:"";a:2:{s:4:"href";s:77:"http://fusion.google.com/add?feedurl=http%3A%2F%2Ffeeds.encosia.com%2FEncosia";s:3:"src";s:51:"http://buttons.googlesyndication.com/fusion/add.gif";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:5;a:5:{s:4:"data";s:25:"Subscribe with Pageflakes";s:7:"attribs";a:1:{s:0:"";a:2:{s:4:"href";s:85:"http://www.pageflakes.com/subscribe.aspx?url=http%3A%2F%2Ffeeds.encosia.com%2FEncosia";s:3:"src";s:87:"http://www.pageflakes.com/ImageFile.ashx?instanceId=Static_4&fileName=ATP_blu_91x17.gif";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:6;a:5:{s:4:"data";s:21:"Subscribe with Plusmo";s:7:"attribs";a:1:{s:0:"";a:2:{s:4:"href";s:70:"http://www.plusmo.com/add?url=http%3A%2F%2Ffeeds.encosia.com%2FEncosia";s:3:"src";s:43:"http://plusmo.com/res/graphics/fbplusmo.gif";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:7;a:5:{s:4:"data";s:23:"Subscribe with Live.com";s:7:"attribs";a:1:{s:0:"";a:2:{s:4:"href";s:65:"http://www.live.com/?add=http%3A%2F%2Ffeeds.encosia.com%2FEncosia";s:3:"src";s:141:"http://tkfiles.storage.msn.com/x1piYkpqHC_35nIp1gLE68-wvzLZO8iXl_JMledmJQXP-XTBOLfmQv4zhj4MhcWEJh_GtoBIiAl1Mjh-ndp9k47If7hTaFno0mxW9_i3p_5qQw";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:28:"http://www.w3.org/1999/xhtml";a:1:{s:4:"meta";a:1:{i:0;a:5:{s:4:"data";s:0:"";s:7:"attribs";a:1:{s:0:"";a:2:{s:4:"name";s:6:"robots";s:7:"content";s:7:"noindex";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:22:"http://pipes.yahoo.com";a:1:{s:4:"meta";a:1:{i:0;a:5:{s:4:"data";s:0:"";s:7:"attribs";a:1:{s:0:"";a:2:{s:4:"name";s:5:"pipes";s:7:"content";s:9:"noprocess";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}}}}}}}}s:4:"type";i:128;s:7:"headers";a:10:{s:12:"content-type";s:23:"text/xml; charset=UTF-8";s:4:"etag";s:27:"j/8BuLPjy5i35fbpEGyHsaDUcqM";s:13:"last-modified";s:29:"Wed, 04 May 2011 19:23:10 GMT";s:4:"date";s:29:"Wed, 04 May 2011 19:25:02 GMT";s:7:"expires";s:29:"Wed, 04 May 2011 19:25:02 GMT";s:13:"cache-control";s:18:"private, max-age=0";s:22:"x-content-type-options";s:7:"nosniff";s:16:"x-xss-protection";s:13:"1; mode=block";s:6:"server";s:3:"GSE";s:17:"transfer-encoding";s:7:"chunked";}s:5:"build";s:14:"20090627192103";}